"use strict";var Ln=Object.create;var Ie=Object.defineProperty;var Mn=Object.getOwnPropertyDescriptor;var zn=Object.getOwnPropertyNames;var jn=Object.getPrototypeOf,Wn=Object.prototype.hasOwnProperty;var ee=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),_n=(i,t)=>{for(var e in t)Ie(i,e,{get:t[e],enumerable:!0})},$i=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of zn(t))!Wn.call(i,n)&&n!==e&&Ie(i,n,{get:()=>t[n],enumerable:!(s=Mn(t,n))||s.enumerable});return i};var Lt=(i,t,e)=>(e=i!=null?Ln(jn(i)):{},$i(t||!i||!i.__esModule?Ie(e,"default",{value:i,enumerable:!0}):e,i)),Qn=i=>$i(Ie({},"__esModule",{value:!0}),i);var ai=ee((Ko,qi)=>{var m={child:require("child_process"),crypto:require("crypto"),fs:require("fs"),os:require("os"),path:require("path"),process,util:require("util")};function Vn(i,t){var e=m.process.platform;if(e==="darwin")return Gn(i,t);if(e==="linux")return Xn(i,t);if(e==="win32")return er(i,t);t(new Error("Platform not yet supported."))}function H(i){if(typeof i!="string")throw new Error("Expected a string.");return i.replace(/"/g,'\\"')}function $n(){if(arguments.length<1||arguments.length>3)throw new Error("Wrong number of arguments.");var i=arguments[0],t={},e=function(){};if(typeof i!="string")throw new Error("Command should be a string.");if(arguments.length===2)if(m.util.isObject(arguments[1]))t=arguments[1];else if(m.util.isFunction(arguments[1]))e=arguments[1];else throw new Error("Expected options or callback.");else if(arguments.length===3){if(m.util.isObject(arguments[1]))t=arguments[1];else throw new Error("Expected options to be an object.");if(m.util.isFunction(arguments[2]))e=arguments[2];else throw new Error("Expected callback to be a function.")}if(/^sudo/i.test(i))return e(new Error('Command should not be prefixed with "sudo".'));if(typeof t.name>"u"){var s=m.process.title;if(Xi(s))t.name=s;else return e(new Error("process.title cannot be used as a valid name."))}else if(!Xi(t.name)){var n="";return n+="options.name must be alphanumeric only ",n+="(spaces are allowed) and <= 70 characters.",e(new Error(n))}if(typeof t.icns<"u"){if(typeof t.icns!="string")return e(new Error("options.icns must be a string if provided."));if(t.icns.trim().length===0)return e(new Error("options.icns must not be empty if provided."))}if(typeof t.env<"u"){if(typeof t.env!="object")return e(new Error("options.env must be an object if provided."));if(Object.keys(t.env).length===0)return e(new Error("options.env must not be empty if provided."));for(var r in t.env){var o=t.env[r];if(typeof r!="string"||typeof o!="string")return e(new Error("options.env environment variables must be strings."));if(!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(r))return e(new Error("options.env has an invalid environment variable name: "+JSON.stringify(r)));if(/[\r\n]/.test(o))return e(new Error("options.env has an invalid environment variable value: "+JSON.stringify(o)))}}var a=m.process.platform;if(a!=="darwin"&&a!=="linux"&&a!=="win32")return e(new Error("Platform not yet supported."));var l={command:i,options:t,uuid:void 0,path:void 0};Vn(l,e)}function Xn(i,t){Hn(i,function(e,s){if(e)return t(e);var n=[];n.push('cd "'+H(m.process.cwd())+'";');for(var r in i.options.env){var o=i.options.env[r];n.push("export "+r+'="'+H(o)+'";')}n.push('"'+H(s)+'"'),/kdesudo/i.test(s)?(n.push("--comment",'"'+i.options.name+' wants to make changes. Enter your password to allow this."'),n.push("-d"),n.push("--")):/pkexec/i.test(s)&&n.push("--disable-internal-agent");var a=`SUDOPROMPT
`;n.push('/bin/bash -c "echo '+H(a.trim())+"; "+H(i.command)+'"'),n=n.join(" "),m.child.exec(n,{encoding:"utf-8",maxBuffer:lr},function(l,h,c){var u=h&&h.slice(0,a.length)===a;u&&(h=h.slice(a.length)),l&&!u&&(/No authentication agent found/.test(c)?l.message=ar:l.message=Pe),t(l,h,c)})})}function Hn(i,t){var e=0,s=["/usr/bin/kdesudo","/usr/bin/pkexec"];function n(){if(e===s.length)return t(new Error("Unable to find pkexec or kdesudo."));var r=s[e++];m.fs.stat(r,function(o){if(o){if(o.code==="ENOTDIR"||o.code==="ENOENT")return n();t(o)}else t(void 0,r)})}n()}function Gn(i,t){var e=m.os.tmpdir();if(!e)return t(new Error("os.tmpdir() not defined."));var s=m.process.env.USER;if(!s)return t(new Error("env['USER'] not defined."));Gi(i,function(n,r){if(n)return t(n);i.uuid=r,i.path=m.path.join(e,i.uuid,i.options.name+".app");function o(a,l,h){Hi(m.path.dirname(i.path),function(c){if(a)return t(a);if(c)return t(c);t(void 0,l,h)})}Zn(i,function(a,l,h){if(a)return o(a,l,h);Yn(i,function(c){if(c)return o(c);Kn(i,function(u,d,f){if(u)return o(u,d,f);qn(i,function(g){if(g)return o(g);Jn(i,function(p,w,b){if(p)return o(p,w,b);tr(i,o)})})})})})})}function Zn(i,t){var e=m.path.dirname(i.path);m.fs.mkdir(e,function(s){if(s)return t(s);var n=m.path.join(e,"sudo-prompt-applet.zip");m.fs.writeFile(n,or,"base64",function(r){if(r)return t(r);var o=[];o.push("/usr/bin/unzip"),o.push("-o"),o.push('"'+H(n)+'"'),o.push('-d "'+H(i.path)+'"'),o=o.join(" "),m.child.exec(o,{encoding:"utf-8"},t)})})}function qn(i,t){var e=m.path.join(i.path,"Contents","MacOS","sudo-prompt-command"),s=[];s.push('cd "'+H(m.process.cwd())+'"');for(var n in i.options.env){var r=i.options.env[n];s.push("export "+n+'="'+H(r)+'"')}s.push(i.command),s=s.join(`
`),m.fs.writeFile(e,s,"utf-8",t)}function Yn(i,t){if(!i.options.icns)return t();m.fs.readFile(i.options.icns,function(e,s){if(e)return t(e);var n=m.path.join(i.path,"Contents","Resources","applet.icns");m.fs.writeFile(n,s,t)})}function Jn(i,t){var e=m.path.join(i.path,"Contents","MacOS","applet"),s={cwd:m.path.dirname(e),encoding:"utf-8"};m.child.exec("./"+m.path.basename(e),s,t)}function Kn(i,t){var e=m.path.join(i.path,"Contents","Info.plist"),s=H(e),n=H("CFBundleName"),r=i.options.name+" Password Prompt";if(/'/.test(r))return t(new Error("Value should not contain single quotes."));var o=[];o.push("/usr/bin/defaults"),o.push("write"),o.push('"'+s+'"'),o.push('"'+n+'"'),o.push("'"+r+"'"),o=o.join(" "),m.child.exec(o,{encoding:"utf-8"},t)}function tr(i,t){var e=m.path.join(i.path,"Contents","MacOS");m.fs.readFile(m.path.join(e,"code"),"utf-8",function(s,n){if(s){if(s.code==="ENOENT")return t(new Error(Pe));t(s)}else m.fs.readFile(m.path.join(e,"stdout"),"utf-8",function(r,o){if(r)return t(r);m.fs.readFile(m.path.join(e,"stderr"),"utf-8",function(a,l){if(a)return t(a);n=parseInt(n.trim(),10),n===0?t(void 0,o,l):(a=new Error("Command failed: "+i.command+`
`+l),a.code=n,t(a,o,l))})})})}function Hi(i,t){if(typeof i!="string"||!i.trim())return t(new Error("Argument path not defined."));var e=[];if(m.process.platform==="win32"){if(/"/.test(i))return t(new Error("Argument path cannot contain double-quotes."));e.push('rmdir /s /q "'+i+'"')}else e.push("/bin/rm"),e.push("-rf"),e.push('"'+H(m.path.normalize(i))+'"');e=e.join(" "),m.child.exec(e,{encoding:"utf-8"},t)}function Gi(i,t){m.crypto.randomBytes(256,function(e,s){e&&(s=Date.now()+""+Math.random());var n=m.crypto.createHash("SHA256");n.update("sudo-prompt-3"),n.update(i.options.name),n.update(i.command),n.update(s);var r=n.digest("hex").slice(-32);if(!r||typeof r!="string"||r.length!==32)return t(new Error("Expected a valid UUID."));t(void 0,r)})}function Xi(i){return!(!/^[a-z0-9 ]+$/i.test(i)||i.trim().length===0||i.length>70)}function er(i,t){var e=m.os.tmpdir();if(!e)return t(new Error("os.tmpdir() not defined."));Gi(i,function(s,n){if(s)return t(s);if(i.uuid=n,i.path=m.path.join(e,i.uuid),/"/.test(i.path))return t(new Error("instance.path cannot contain double-quotes."));i.pathElevate=m.path.join(i.path,"elevate.vbs"),i.pathExecute=m.path.join(i.path,"execute.bat"),i.pathCommand=m.path.join(i.path,"command.bat"),i.pathStdout=m.path.join(i.path,"stdout"),i.pathStderr=m.path.join(i.path,"stderr"),i.pathStatus=m.path.join(i.path,"status"),m.fs.mkdir(i.path,function(r){if(r)return t(r);function o(a,l,h){Hi(i.path,function(c){if(a)return t(a);if(c)return t(c);t(void 0,l,h)})}rr(i,function(a){if(a)return o(a);nr(i,function(l){if(l)return o(l);ir(i,function(h,c,u){if(h)return o(h,c,u);Zi(i,function(d){if(d)return o(d);sr(i,o)})})})})})})}function ir(i,t){var e=[];e.push("powershell.exe"),e.push("Start-Process"),e.push("-FilePath"),e.push(`"'`+i.pathExecute.replace(/'/g,"`'")+`'"`),e.push("-WindowStyle hidden"),e.push("-Verb runAs"),e=e.join(" ");var s=m.child.exec(e,{encoding:"utf-8"},function(n,r,o){if(n)return t(new Error(Pe),r,o);t()});s.stdin.end()}function sr(i,t){m.fs.readFile(i.pathStatus,"utf-8",function(e,s){if(e)return t(e);m.fs.readFile(i.pathStdout,"utf-8",function(n,r){if(n)return t(n);m.fs.readFile(i.pathStderr,"utf-8",function(o,a){if(o)return t(o);s=parseInt(s.trim(),10),s===0?t(void 0,r,a):(o=new Error("Command failed: "+i.command+`\r
`+a),o.code=s,t(o,r,a))})})})}function Zi(i,t){m.fs.stat(i.pathStatus,function(e,s){e&&e.code==="ENOENT"||s.size<2?setTimeout(function(){m.fs.stat(i.pathStdout,function(n){if(n)return t(new Error(Pe));Zi(i,t)})},1e3):e?t(e):t()})}function nr(i,t){var e=m.process.cwd();if(/"/.test(e))return t(new Error("process.cwd() cannot contain double-quotes."));var s=[];s.push("@echo off"),s.push("chcp 65001>nul"),s.push('cd /d "'+e+'"');for(var n in i.options.env){var r=i.options.env[n];s.push("set "+n+"="+r.replace(/([<>\\|&^])/g,"^$1"))}s.push(i.command),s=s.join(`\r
`),m.fs.writeFile(i.pathCommand,s,"utf-8",t)}function rr(i,t){var e=[];e.push("@echo off"),e.push('call "'+i.pathCommand+'" > "'+i.pathStdout+'" 2> "'+i.pathStderr+'"'),e.push('(echo %ERRORLEVEL%) > "'+i.pathStatus+'"'),e=e.join(`\r
`),m.fs.writeFile(i.pathExecute,e,"utf-8",t)}qi.exports.exec=$n;var or="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",Pe="User did not grant permission.",ar="No polkit authentication agent found.",lr=134217728});var es=ee((aa,cr)=>{cr.exports={name:"code-background",displayName:"Background",description:"The most advanced background image extension for VSCode",icon:"assets/icon-sm.png",galleryBanner:{color:"#0098FF",theme:"dark"},publisher:"Katsute",version:"2.10.2",private:!0,engines:{vscode:"^1.87.0"},categories:["Other"],keywords:["bg","bk","background","cover","theme","image","gif"],activationEvents:["onStartupFinished"],extensionKind:["ui"],contributes:{commands:[{command:"background.install",title:"Install",category:"Background"},{command:"background.uninstall",title:"Uninstall",category:"Background"},{command:"background.reload",title:"Reload",category:"Background"},{command:"background.config",title:"Configuration",category:"Background"},{command:"background.changelog",title:"Changelog",category:"Background"},{command:"background.help",title:"Help",category:"Background"}],configuration:{title:"Background",order:0,properties:{"background.windowBackgrounds":{markdownDescription:"The list of files, globs, or URLs to pull background images from.\n\n* Use only `/` for directories, `\\` is reserved for escape characters.\n\n* Image URLs must be served over HTTPS.",type:"array",order:0,default:[],items:{type:"string"}},"background.editorBackgrounds":{markdownDescription:"The list of files, globs, or URLs to pull background images from.\n\n* Use only `/` for directories, `\\` is reserved for escape characters.\n\n* Image URLs must be served over HTTPS.",type:"array",order:1,default:[],items:{type:"string"}},"background.sidebarBackgrounds":{markdownDescription:"The list of files, globs, or URLs to pull background images from.\n\n* Use only `/` for directories, `\\` is reserved for escape characters.\n\n* Image URLs must be served over HTTPS.",type:"array",order:2,default:[],items:{type:"string"}},"background.panelBackgrounds":{markdownDescription:"The list of files, globs, or URLs to pull background images from.\n\n* Use only `/` for directories, `\\` is reserved for escape characters.\n\n* Image URLs must be served over HTTPS.",type:"array",order:3,default:[],items:{type:"string"}},"background.backgroundAlignment":{markdownDescription:"The background image alignment.",type:"array",order:4,default:["Center Center","Center Center","Center Center","Center Center"],minItems:4,maxItems:4,items:{type:"string",enum:["Top Left","Top Center","Top Right","Center Left","Center Center","Center Right","Bottom Left","Bottom Center","Bottom Right","Manual"]}},"background.backgroundAlignmentValue":{markdownDescription:"If `#background.backgroundAlignment#` is set to `Manual`, this is the literal value for the `background-position` css property.",type:"array",order:5,default:["50%","50%","50%","50%"],minItems:4,maxItems:4,items:{type:"string",pattern:"^[\\w.% +-]*$"}},"background.backgroundBlur":{markdownDescription:"The background image blur amount in css units.",type:"array",order:6,default:["0","0","0","0"],minItems:4,maxItems:4,items:{type:"string",pattern:"^[\\w.% +-]*$"}},"background.backgroundOpacity":{markdownDescription:"The UI opacity, make sure this number is not to low, otherwise you may not be able to see the UI and revert this change.\n\n`0` is fully visible and `1` is invisible.",type:"array",order:7,default:[.9,.9,.9,.9],minItems:4,maxItems:4,items:{type:"number",minimum:0,maximum:1}},"background.backgroundRepeat":{markdownDescription:"The background image repeat.",type:"array",order:8,default:["No Repeat","No Repeat","No Repeat","No Repeat"],minItems:4,maxItems:4,items:{type:"string",enum:["No Repeat","Repeat","Repeat X","Repeat Y","Repeat Space","Repeat Round"],enumDescriptions:["Do not repeat","Repeat X/Y","Repeat X","Repeat Y","Repeat with even spacing to fill the screen","Repeat and stretch images to fill the screen"]}},"background.backgroundSize":{markdownDescription:"The background image size.",type:"array",order:9,default:["Cover","Cover","Cover","Cover"],minItems:4,maxItems:4,items:{type:"string",enum:["Auto","Contain","Cover","Manual"],enumDescriptions:["Original image size","Fit image to the screen","Stretch image to fill the screen","Manual size"]}},"background.backgroundSizeValue":{markdownDescription:"If `#background.windowBackgroundSize#` is set to `Manual`, this is the literal value for the `background-size` css property.",type:"array",order:10,default:["100%","100%","100%","100%"],minItems:4,maxItems:4,items:{type:"string",pattern:"^[\\w.% +-]*$"}},"background.backgroundChangeTime":{markdownDescription:"How long in seconds before the background should automatically change.\n\nSet to `0` to always use the same image.",type:"array",order:11,default:[0,0,0,0],minItems:4,maxItems:4,items:{type:"number",minimum:0}},"background.autoInstall":{markdownDescription:`Automatically installs backgrounds and reloads the window on startup if changes are detected or VSCode updates.

This option is disabled when you run the uninstall command.`,order:12,type:"boolean",default:!1},"background.useWindowOptionsForAllBackgrounds":{markdownDescription:`**Deprecated:** This setting is being removed to reduce confusion for new users, please set options separately.

~~If enabled, all background images will use the options set for the windows background.~~

~~This does not include the backgrounds, you still need to add background images separately.~~`,order:13,type:"boolean",default:!1},"background.renderContentAboveBackground":{markdownDescription:"Render content like images, PDFs, and markdown previews above the background.",order:14,type:"boolean",default:!1},"background.smoothImageRendering":{markdownDescription:"Use smooth image rendering rather than pixelated rendering when resizing images.",order:15,type:"boolean",default:!1},"background.CSS":{markdownDescription:"Apply raw CSS to VSCode.",order:16,type:"string",editPresentation:"multilineText",default:""}}}},main:"dist/index.js",scripts:{"// -- dev -- //":"",clean:"rimraf --glob dist & rimraf --glob code-background-*.vsix",prune:"npm prune && npm i --package-lock --ignore-scripts",update:"npm update -D && npm i --package-lock --ignore-scripts && npm run prune","// -- build -- //":"","vscode:prepublish":"npm run prepare","build:esbuild":"esbuild src/extension.ts --bundle --outfile=dist/index.js --external:vscode --format=cjs --platform=node --minify --legal-comments=none --metafile=meta.json","build:post":"node build.js",build:"npm run build:esbuild && npm run build:post",prepare:"npm run clean && npm run build","// -- deploy -- //":"",package:"vsce package"},repository:{type:"git",url:"git+https://github.com/KatsuteDev/Background.git"},author:"Katsute",license:"GPL-2.0-only",bugs:{url:"https://github.com/KatsuteDev/Background/issues"},homepage:"https://github.com/KatsuteDev/Background#readme",devDependencies:{"@types/node":"20.12.2","@types/tmp":"0.2.6","@types/vscode":"1.87.0","@vscode/sudo-prompt":"9.3.1","@vscode/test-electron":"2.3.9","@vscode/vsce":"2.24.0",esbuild:"0.20.2",glob:"10.3.12",rimraf:"5.0.5",tmp:"0.2.3",typescript:"5.4.3"}}});var ls=ee((Aa,as)=>{"use strict";as.exports=rs;function rs(i,t,e){i instanceof RegExp&&(i=ns(i,e)),t instanceof RegExp&&(t=ns(t,e));var s=os(i,t,e);return s&&{start:s[0],end:s[1],pre:e.slice(0,s[0]),body:e.slice(s[0]+i.length,s[1]),post:e.slice(s[1]+t.length)}}function ns(i,t){var e=t.match(i);return e?e[0]:null}rs.range=os;function os(i,t,e){var s,n,r,o,a,l=e.indexOf(i),h=e.indexOf(t,l+1),c=l;if(l>=0&&h>0){if(i===t)return[l,h];for(s=[],r=e.length;c>=0&&!a;)c==l?(s.push(c),l=e.indexOf(i,c+1)):s.length==1?a=[s.pop(),h]:(n=s.pop(),n<r&&(r=n,o=h),h=e.indexOf(t,c+1)),c=l<h&&l>=0?l:h;s.length&&(a=[r,o])}return a}});var gs=ee((ba,ms)=>{var hs=ls();ms.exports=pr;var cs="\0SLASH"+Math.random()+"\0",us="\0OPEN"+Math.random()+"\0",ci="\0CLOSE"+Math.random()+"\0",ds="\0COMMA"+Math.random()+"\0",fs="\0PERIOD"+Math.random()+"\0";function hi(i){return parseInt(i,10)==i?parseInt(i,10):i.charCodeAt(0)}function dr(i){return i.split("\\\\").join(cs).split("\\{").join(us).split("\\}").join(ci).split("\\,").join(ds).split("\\.").join(fs)}function fr(i){return i.split(cs).join("\\").split(us).join("{").split(ci).join("}").split(ds).join(",").split(fs).join(".")}function ps(i){if(!i)return[""];var t=[],e=hs("{","}",i);if(!e)return i.split(",");var s=e.pre,n=e.body,r=e.post,o=s.split(",");o[o.length-1]+="{"+n+"}";var a=ps(r);return r.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),t.push.apply(t,o),t}function pr(i){return i?(i.substr(0,2)==="{}"&&(i="\\{\\}"+i.substr(2)),se(dr(i),!0).map(fr)):[]}function mr(i){return"{"+i+"}"}function gr(i){return/^-?0\d/.test(i)}function Ar(i,t){return i<=t}function br(i,t){return i>=t}function se(i,t){var e=[],s=hs("{","}",i);if(!s)return[i];var n=s.pre,r=s.post.length?se(s.post,!1):[""];if(/\$$/.test(s.pre))for(var o=0;o<r.length;o++){var a=n+"{"+s.body+"}"+r[o];e.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),c=l||h,u=s.body.indexOf(",")>=0;if(!c&&!u)return s.post.match(/,.*\}/)?(i=s.pre+"{"+s.body+ci+s.post,se(i)):[i];var d;if(c)d=s.body.split(/\.\./);else if(d=ps(s.body),d.length===1&&(d=se(d[0],!1).map(mr),d.length===1))return r.map(function(Re){return s.pre+d[0]+Re});var f;if(c){var g=hi(d[0]),p=hi(d[1]),w=Math.max(d[0].length,d[1].length),b=d.length==3?Math.abs(hi(d[2])):1,S=Ar,v=p<g;v&&(b*=-1,S=br);var y=d.some(gr);f=[];for(var E=g;S(E,p);E+=b){var T;if(h)T=String.fromCharCode(E),T==="\\"&&(T="");else if(T=String(E),y){var et=w-T.length;if(et>0){var Te=new Array(et+1).join("0");E<0?T="-"+Te+T.slice(1):T=Te+T}}f.push(T)}}else{f=[];for(var ct=0;ct<d.length;ct++)f.push.apply(f,se(d[ct],!1))}for(var ct=0;ct<f.length;ct++)for(var o=0;o<r.length;o++){var a=n+f[ct]+r[o];(!t||c||a)&&e.push(a)}}return e}});var Fn=ee((qh,Et)=>{var R=require("fs"),ji=require("os"),X=require("path"),An=require("crypto"),mt={fs:R.constants,os:ji.constants},bn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",kn=/XXXXXX/,Fo=3,yn=(mt.O_CREAT||mt.fs.O_CREAT)|(mt.O_EXCL||mt.fs.O_EXCL)|(mt.O_RDWR||mt.fs.O_RDWR),Do=ji.platform()==="win32",Oo=mt.EBADF||mt.os.errno.EBADF,No=mt.ENOENT||mt.os.errno.ENOENT,vn=448,Sn=384,Uo="exit",Jt=[],En=R.rmdirSync.bind(R),xn=!1;function Lo(i,t){return R.rm(i,{recursive:!0},t)}function Cn(i){return R.rmSync(i,{recursive:!0})}function Wi(i,t){let e=Kt(i,t),s=e[0],n=e[1];try{Rn(s)}catch(o){return n(o)}let r=s.tries;(function o(){try{let a=Tn(s);R.stat(a,function(l){if(!l)return r-- >0?o():n(new Error("Could not get a unique tmp filename, max tries reached "+a));n(null,a)})}catch(a){n(a)}})()}function _i(i){let t=Kt(i),e=t[0];Rn(e);let s=e.tries;do{let n=Tn(e);try{R.statSync(n)}catch{return n}}while(s-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function Mo(i,t){let e=Kt(i,t),s=e[0],n=e[1];Wi(s,function(o,a){if(o)return n(o);R.open(a,yn,s.mode||Sn,function(h,c){if(h)return n(h);if(s.discardDescriptor)return R.close(c,function(d){return n(d,a,void 0,Li(a,-1,s,!1))});{let u=s.discardDescriptor||s.detachDescriptor;n(null,a,c,Li(a,u?-1:c,s,!1))}})})}function zo(i){let t=Kt(i),e=t[0],s=e.discardDescriptor||e.detachDescriptor,n=_i(e);var r=R.openSync(n,yn,e.mode||Sn);return e.discardDescriptor&&(R.closeSync(r),r=void 0),{name:n,fd:r,removeCallback:Li(n,s?-1:r,e,!0)}}function jo(i,t){let e=Kt(i,t),s=e[0],n=e[1];Wi(s,function(o,a){if(o)return n(o);R.mkdir(a,s.mode||vn,function(h){if(h)return n(h);n(null,a,Bn(a,s,!1))})})}function Wo(i){let t=Kt(i),e=t[0],s=_i(e);return R.mkdirSync(s,e.mode||vn),{name:s,removeCallback:Bn(s,e,!0)}}function _o(i,t){let e=function(s){if(s&&!zi(s))return t(s);t()};0<=i[0]?R.close(i[0],function(){R.unlink(i[1],e)}):R.unlink(i[1],e)}function Qo(i){let t=null;try{0<=i[0]&&R.closeSync(i[0])}catch(e){if(!Xo(e)&&!zi(e))throw e}finally{try{R.unlinkSync(i[1])}catch(e){zi(e)||(t=e)}}if(t!==null)throw t}function Li(i,t,e,s){let n=ni(Qo,[t,i],s),r=ni(_o,[t,i],s,n);return e.keep||Jt.unshift(n),s?n:r}function Bn(i,t,e){let s=t.unsafeCleanup?Lo:R.rmdir.bind(R),n=t.unsafeCleanup?Cn:En,r=ni(n,i,e),o=ni(s,i,e,r);return t.keep||Jt.unshift(r),e?r:o}function ni(i,t,e,s){let n=!1;return function r(o){if(!n){let a=s||r,l=Jt.indexOf(a);return l>=0&&Jt.splice(l,1),n=!0,e||i===En||i===Cn?i(t):i(t,o||function(){})}}}function Vo(){if(xn)for(;Jt.length;)try{Jt[0]()}catch{}}function wn(i){let t=[],e=null;try{e=An.randomBytes(i)}catch{e=An.pseudoRandomBytes(i)}for(var s=0;s<i;s++)t.push(bn[e[s]%bn.length]);return t.join("")}function $o(i){return i===null||Q(i)||!i.trim()}function Q(i){return typeof i>"u"}function Kt(i,t){if(typeof i=="function")return[{},i];if(Q(i))return[{},t];let e={};for(let s of Object.getOwnPropertyNames(i))e[s]=i[s];return[e,t]}function Tn(i){let t=i.tmpdir;if(!Q(i.name))return X.join(t,i.dir,i.name);if(!Q(i.template))return X.join(t,i.dir,i.template).replace(kn,wn(6));let e=[i.prefix?i.prefix:"tmp","-",process.pid,"-",wn(12),i.postfix?"-"+i.postfix:""].join("");return X.join(t,i.dir,e)}function Rn(i){i.tmpdir=Pn(i);let t=i.tmpdir;if(Q(i.name)||Ui(i.name,"name",t),Q(i.dir)||Ui(i.dir,"dir",t),!Q(i.template)&&(Ui(i.template,"template",t),!i.template.match(kn)))throw new Error(`Invalid template, found "${i.template}".`);if(!Q(i.tries)&&isNaN(i.tries)||i.tries<0)throw new Error(`Invalid tries, found "${i.tries}".`);i.tries=Q(i.name)?i.tries||Fo:1,i.keep=!!i.keep,i.detachDescriptor=!!i.detachDescriptor,i.discardDescriptor=!!i.discardDescriptor,i.unsafeCleanup=!!i.unsafeCleanup,i.dir=Q(i.dir)?"":X.relative(t,Mi(i.dir,t)),i.template=Q(i.template)?void 0:X.relative(t,Mi(i.template,t)),i.template=$o(i.template)?void 0:X.relative(i.dir,i.template),i.name=Q(i.name)?void 0:i.name,i.prefix=Q(i.prefix)?"":i.prefix,i.postfix=Q(i.postfix)?"":i.postfix}function Mi(i,t){return i.startsWith(t)?X.resolve(i):X.resolve(X.join(t,i))}function Ui(i,t,e){if(t==="name"){if(X.isAbsolute(i))throw new Error(`${t} option must not contain an absolute path, found "${i}".`);let s=X.basename(i);if(s===".."||s==="."||s!==i)throw new Error(`${t} option must not contain a path, found "${i}".`)}else{if(X.isAbsolute(i)&&!i.startsWith(e))throw new Error(`${t} option must be relative to "${e}", found "${i}".`);let s=Mi(i,e);if(!s.startsWith(e))throw new Error(`${t} option must be relative to "${e}", found "${s}".`)}}function Xo(i){return In(i,-Oo,"EBADF")}function zi(i){return In(i,-No,"ENOENT")}function In(i,t,e){return Do?i.code===e:i.code===e&&i.errno===t}function Ho(){xn=!0}function Pn(i){return X.resolve(i&&i.tmpdir||ji.tmpdir())}process.addListener(Uo,Vo);Object.defineProperty(Et.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return Pn()}});Et.exports.dir=jo;Et.exports.dirSync=Wo;Et.exports.file=Mo;Et.exports.fileSync=zo;Et.exports.tmpName=Wi;Et.exports.tmpNameSync=_i;Et.exports.setGracefulCleanup=Ho});var Yo={};_n(Yo,{activate:()=>qo,installDelay:()=>Ce,setActive:()=>te,statusbar:()=>oi});module.exports=Qn(Yo);var It=require("path"),Be=require("os"),Un=Lt(ai()),Pt=require("fs"),x=require("vscode");var Yi=require("process"),Ji=require("crypto"),Ki=require("fs"),hr=Yi.platform==="win32",Fe=i=>i.map(t=>hr?((0,Ki.existsSync)(t[1])?"":`echo "NUL" > "${t[1]}" && `)+`xcopy /r /y "${t[0]}" "${t[1]}"`:`cp -f '${t[0]}' '${t[1]}'`).join(" && "),ts=i=>(0,Ji.createHash)("md5").update(i).digest("base64").replace(/=+$/gm,"");var Ft=require("vscode"),Dt=()=>Ft.commands.executeCommand("workbench.action.reloadWindow"),G=(i={})=>{i.handle&&Ft.window.showInputBox(i).then(t=>{t!==void 0&&new Promise(()=>i.handle(t))})},k=(i,t)=>({...i,description:((i.description??"")+(i.label===t?" (selected)":"")).trim()}),it=(i,t={},e)=>{Ft.window.showQuickPick([...e?[k({alwaysShow:!0,label:"$(arrow-left) Back",handle:e}),_()]:[],...i],t).then(s=>{s?.handle&&new Promise(()=>s.handle(s))})},_=()=>({label:"",kind:Ft.QuickPickItemKind.Separator});var Ni=require("vscode");var qt=require("vscode");var N=(i,t)=>Math.round((i+Number.EPSILON)*Math.pow(10,t))/Math.pow(10,t);var At=require("vscode");var li=es(),st=i=>li.contributes.configuration.properties[`background.${i}`];var is=i=>i.replace(/\r?\n/gm," ").replace(/"/gm,"'").replace(/\\+$/gm,""),De=i=>i.replace(/[^\w.% +-]/gmi,""),ur=/[^\w.% +-]/gm,gt=i=>!i.match(ur);var ss=i=>({window:0,editor:1,sidebar:2,panel:3})[i],bt=()=>At.workspace.getConfiguration("background"),ie=()=>At.window.showWarningMessage("Background has been modified, a reinstall is required to see changes.","Install and Reload","Ignore").then(i=>{i==="Install and Reload"&&At.commands.executeCommand("background.install")}),A=(i,t,e=!1)=>t?bt().get(i)[e&&A("useWindowOptionsForAllBackgrounds")===!0?0:ss(t)]??st(i).default[0]??"null":bt().get(i)??st(i).default??"null",C=(i,t)=>{let e=A(i,t,!0),s=st(i);switch(i){case"backgroundAlignment":switch(e){case s.items.enum[0]:return"left top";case s.items.enum[1]:return"center top";case s.items.enum[2]:return"right top";case s.items.enum[3]:return"left center";case s.items.enum[4]:return"center center";case s.items.enum[5]:return"right center";case s.items.enum[6]:return"left bottom";case s.items.enum[7]:return"center bottom";case s.items.enum[8]:return"right bottom";case s.items.enum[9]:return De(A("backgroundAlignmentValue",t,!0))}case"backgroundBlur":return De(e);case"backgroundOpacity":return isNaN(+e)?s.default[0]:N(+e,2);case"backgroundRepeat":switch(e){case s.items.enum[0]:return"no-repeat";case s.items.enum[1]:return"repeat";case s.items.enum[2]:return"repeat-x";case s.items.enum[3]:return"repeat-y";case s.items.enum[4]:return"space";case s.items.enum[5]:return"round"}case"backgroundSize":switch(e){case s.items.enum[0]:return"auto";case s.items.enum[1]:return"contain";case s.items.enum[2]:return"cover";case s.items.enum[3]:return De(A("backgroundSizeValue",t,!0))}default:return"null"}},I=async(i,t,e,s=!1)=>{let n=!1;if(!e)n=A(i)!==t,await bt().update(i,t,At.ConfigurationTarget.Global);else{let r=A(i);for(let a=r.length;a<4;a++)r.push(st(i).default[0]);let o=ss(e);n=r[o]!==t,r[o]=t,await bt().update(i,r,At.ConfigurationTarget.Global)}s===!1&&n&&ie()},Mt=async(i,t,e)=>{t.label&&await I(i,t.label,e)};var rn=require("path");var Es=Lt(gs(),1);var ne=i=>{if(typeof i!="string")throw new TypeError("invalid pattern");if(i.length>65536)throw new TypeError("pattern is too long")};var wr={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},re=i=>i.replace(/[[\]\\-]/g,"\\$&"),kr=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),As=i=>i.join(""),bs=(i,t)=>{let e=t;if(i.charAt(e)!=="[")throw new Error("not in a brace expression");let s=[],n=[],r=e+1,o=!1,a=!1,l=!1,h=!1,c=e,u="";t:for(;r<i.length;){let p=i.charAt(r);if((p==="!"||p==="^")&&r===e+1){h=!0,r++;continue}if(p==="]"&&o&&!l){c=r+1;break}if(o=!0,p==="\\"&&!l){l=!0,r++;continue}if(p==="["&&!l){for(let[w,[b,S,v]]of Object.entries(wr))if(i.startsWith(w,r)){if(u)return["$.",!1,i.length-e,!0];r+=w.length,v?n.push(b):s.push(b),a=a||S;continue t}}if(l=!1,u){p>u?s.push(re(u)+"-"+re(p)):p===u&&s.push(re(p)),u="",r++;continue}if(i.startsWith("-]",r+1)){s.push(re(p+"-")),r+=2;continue}if(i.startsWith("-",r+1)){u=p,r+=2;continue}s.push(re(p)),r++}if(c<r)return["",!1,0,!1];if(!s.length&&!n.length)return["$.",!1,i.length-e,!0];if(n.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!h){let p=s[0].length===2?s[0].slice(-1):s[0];return[kr(p),!1,c-e,!1]}let d="["+(h?"^":"")+As(s)+"]",f="["+(h?"":"^")+As(n)+"]";return[s.length&&n.length?"("+d+"|"+f+")":s.length?d:f,a,c-e,!0]};var nt=(i,{windowsPathsNoEscape:t=!1}={})=>t?i.replace(/\[([^\/\\])\]/g,"$1"):i.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var yr=new Set(["!","?","+","*","@"]),ws=i=>yr.has(i),vr="(?!(?:^|/)\\.\\.?(?:$|/))",Oe="(?!\\.)",Sr=new Set(["[","."]),Er=new Set(["..","."]),xr=new Set("().*{}+?[]^$\\!"),Cr=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ui="[^/]",ks=ui+"*?",ys=ui+"+?",zt=class i{type;#t;#i;#r=!1;#s=[];#a;#h;#u;#l=!1;#o;#e;#m=!1;constructor(t,e,s={}){this.type=t,t&&(this.#i=!0),this.#a=e,this.#t=this.#a?this.#a.#t:this,this.#o=this.#t===this?s:this.#t.#o,this.#u=this.#t===this?[]:this.#t.#u,t==="!"&&!this.#t.#l&&this.#u.push(this),this.#h=this.#a?this.#a.#s.length:0}get hasMagic(){if(this.#i!==void 0)return this.#i;for(let t of this.#s)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#i=!0;return this.#i}toString(){return this.#e!==void 0?this.#e:this.type?this.#e=this.type+"("+this.#s.map(t=>String(t)).join("|")+")":this.#e=this.#s.map(t=>String(t)).join("")}#A(){if(this!==this.#t)throw new Error("should only call on root");if(this.#l)return this;this.toString(),this.#l=!0;let t;for(;t=this.#u.pop();){if(t.type!=="!")continue;let e=t,s=e.#a;for(;s;){for(let n=e.#h+1;!s.type&&n<s.#s.length;n++)for(let r of t.#s){if(typeof r=="string")throw new Error("string part in extglob AST??");r.copyIn(s.#s[n])}e=s,s=e.#a}}return this}push(...t){for(let e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof i&&e.#a===this))throw new Error("invalid part: "+e);this.#s.push(e)}}toJSON(){let t=this.type===null?this.#s.slice().map(e=>typeof e=="string"?e:e.toJSON()):[this.type,...this.#s.map(e=>e.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#l&&this.#a?.type==="!")&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#a?.isStart())return!1;if(this.#h===0)return!0;let t=this.#a;for(let e=0;e<this.#h;e++){let s=t.#s[e];if(!(s instanceof i&&s.type==="!"))return!1}return!0}isEnd(){if(this.#t===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let t=this.#a?this.#a.#s.length:0;return this.#h===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){let e=new i(this.type,t);for(let s of this.#s)e.copyIn(s);return e}static#f(t,e,s,n){let r=!1,o=!1,a=-1,l=!1;if(e.type===null){let f=s,g="";for(;f<t.length;){let p=t.charAt(f++);if(r||p==="\\"){r=!r,g+=p;continue}if(o){f===a+1?(p==="^"||p==="!")&&(l=!0):p==="]"&&!(f===a+2&&l)&&(o=!1),g+=p;continue}else if(p==="["){o=!0,a=f,l=!1,g+=p;continue}if(!n.noext&&ws(p)&&t.charAt(f)==="("){e.push(g),g="";let w=new i(p,e);f=i.#f(t,w,f,n),e.push(w);continue}g+=p}return e.push(g),f}let h=s+1,c=new i(null,e),u=[],d="";for(;h<t.length;){let f=t.charAt(h++);if(r||f==="\\"){r=!r,d+=f;continue}if(o){h===a+1?(f==="^"||f==="!")&&(l=!0):f==="]"&&!(h===a+2&&l)&&(o=!1),d+=f;continue}else if(f==="["){o=!0,a=h,l=!1,d+=f;continue}if(ws(f)&&t.charAt(h)==="("){c.push(d),d="";let g=new i(f,c);c.push(g),h=i.#f(t,g,h,n);continue}if(f==="|"){c.push(d),d="",u.push(c),c=new i(null,e);continue}if(f===")")return d===""&&e.#s.length===0&&(e.#m=!0),c.push(d),d="",e.push(...u,c),h;d+=f}return e.type=null,e.#i=void 0,e.#s=[t.substring(s-1)],h}static fromGlob(t,e={}){let s=new i(null,void 0,e);return i.#f(t,s,0,e),s}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();let t=this.toString(),[e,s,n,r]=this.toRegExpSource();if(!(n||this.#i||this.#o.nocase&&!this.#o.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return s;let a=(this.#o.nocase?"i":"")+(r?"u":"");return Object.assign(new RegExp(`^${e}$`,a),{_src:e,_glob:t})}toRegExpSource(t){let e=t??!!this.#o.dot;if(this.#t===this&&this.#A(),!this.type){let l=this.isStart()&&this.isEnd(),h=this.#s.map(f=>{let[g,p,w,b]=typeof f=="string"?i.#k(f,this.#i,l):f.toRegExpSource(t);return this.#i=this.#i||w,this.#r=this.#r||b,g}).join(""),c="";if(this.isStart()&&typeof this.#s[0]=="string"&&!(this.#s.length===1&&Er.has(this.#s[0]))){let g=Sr,p=e&&g.has(h.charAt(0))||h.startsWith("\\.")&&g.has(h.charAt(2))||h.startsWith("\\.\\.")&&g.has(h.charAt(4)),w=!e&&!t&&g.has(h.charAt(0));c=p?vr:w?Oe:""}let u="";return this.isEnd()&&this.#t.#l&&this.#a?.type==="!"&&(u="(?:$|\\/)"),[c+h+u,nt(h),this.#i=!!this.#i,this.#r]}let s=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:",r=this.#d(e);if(this.isStart()&&this.isEnd()&&!r&&this.type!=="!"){let l=this.toString();return this.#s=[l],this.type=null,this.#i=void 0,[l,nt(this.toString()),!1,!1]}let o=!s||t||e||!Oe?"":this.#d(!0);o===r&&(o=""),o&&(r=`(?:${r})(?:${o})*?`);let a="";if(this.type==="!"&&this.#m)a=(this.isStart()&&!e?Oe:"")+ys;else{let l=this.type==="!"?"))"+(this.isStart()&&!e&&!t?Oe:"")+ks+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=n+r+l}return[a,nt(r),this.#i=!!this.#i,this.#r]}#d(t){return this.#s.map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");let[s,n,r,o]=e.toRegExpSource(t);return this.#r=this.#r||o,s}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static#k(t,e,s=!1){let n=!1,r="",o=!1;for(let a=0;a<t.length;a++){let l=t.charAt(a);if(n){n=!1,r+=(xr.has(l)?"\\":"")+l;continue}if(l==="\\"){a===t.length-1?r+="\\\\":n=!0;continue}if(l==="["){let[h,c,u,d]=bs(t,a);if(u){r+=h,o=o||c,a+=u-1,e=e||d;continue}}if(l==="*"){s&&t==="*"?r+=ys:r+=ks,e=!0;continue}if(l==="?"){r+=ui,e=!0;continue}r+=Cr(l)}return[r,nt(t),!!e,o]}};var xt=(i,{windowsPathsNoEscape:t=!1}={})=>t?i.replace(/[?*()[\]]/g,"[$&]"):i.replace(/[?*()[\]\\]/g,"\\$&");var j=(i,t,e={})=>(ne(t),!e.nocomment&&t.charAt(0)==="#"?!1:new V(t,e).match(i)),Br=/^\*+([^+@!?\*\[\(]*)$/,Tr=i=>t=>!t.startsWith(".")&&t.endsWith(i),Rr=i=>t=>t.endsWith(i),Ir=i=>(i=i.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(i)),Pr=i=>(i=i.toLowerCase(),t=>t.toLowerCase().endsWith(i)),Fr=/^\*+\.\*+$/,Dr=i=>!i.startsWith(".")&&i.includes("."),Or=i=>i!=="."&&i!==".."&&i.includes("."),Nr=/^\.\*+$/,Ur=i=>i!=="."&&i!==".."&&i.startsWith("."),Lr=/^\*+$/,Mr=i=>i.length!==0&&!i.startsWith("."),zr=i=>i.length!==0&&i!=="."&&i!=="..",jr=/^\?+([^+@!?\*\[\(]*)?$/,Wr=([i,t=""])=>{let e=xs([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},_r=([i,t=""])=>{let e=Cs([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},Qr=([i,t=""])=>{let e=Cs([i]);return t?s=>e(s)&&s.endsWith(t):e},Vr=([i,t=""])=>{let e=xs([i]);return t?s=>e(s)&&s.endsWith(t):e},xs=([i])=>{let t=i.length;return e=>e.length===t&&!e.startsWith(".")},Cs=([i])=>{let t=i.length;return e=>e.length===t&&e!=="."&&e!==".."},Bs=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",vs={win32:{sep:"\\"},posix:{sep:"/"}},$r=Bs==="win32"?vs.win32.sep:vs.posix.sep;j.sep=$r;var U=Symbol("globstar **");j.GLOBSTAR=U;var Xr="[^/]",Hr=Xr+"*?",Gr="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Zr="(?:(?!(?:\\/|^)\\.).)*?",qr=(i,t={})=>e=>j(e,i,t);j.filter=qr;var Z=(i,t={})=>Object.assign({},i,t),Yr=i=>{if(!i||typeof i!="object"||!Object.keys(i).length)return j;let t=j;return Object.assign((s,n,r={})=>t(s,n,Z(i,r)),{Minimatch:class extends t.Minimatch{constructor(n,r={}){super(n,Z(i,r))}static defaults(n){return t.defaults(Z(i,n)).Minimatch}},AST:class extends t.AST{constructor(n,r,o={}){super(n,r,Z(i,o))}static fromGlob(n,r={}){return t.AST.fromGlob(n,Z(i,r))}},unescape:(s,n={})=>t.unescape(s,Z(i,n)),escape:(s,n={})=>t.escape(s,Z(i,n)),filter:(s,n={})=>t.filter(s,Z(i,n)),defaults:s=>t.defaults(Z(i,s)),makeRe:(s,n={})=>t.makeRe(s,Z(i,n)),braceExpand:(s,n={})=>t.braceExpand(s,Z(i,n)),match:(s,n,r={})=>t.match(s,n,Z(i,r)),sep:t.sep,GLOBSTAR:U})};j.defaults=Yr;var Ts=(i,t={})=>(ne(i),t.nobrace||!/\{(?:(?!\{).)*\}/.test(i)?[i]:(0,Es.default)(i));j.braceExpand=Ts;var Jr=(i,t={})=>new V(i,t).makeRe();j.makeRe=Jr;var Kr=(i,t,e={})=>{let s=new V(t,e);return i=i.filter(n=>s.match(n)),s.options.nonull&&!i.length&&i.push(t),i};j.match=Kr;var Ss=/[?*]|[+@!]\(.*?\)|\[|\]/,to=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),V=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){ne(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||Bs,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let t of this.set)for(let e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){let t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...r)=>console.error(...r)),this.debug(this.pattern,this.globSet);let s=this.globSet.map(r=>this.slashSplit(r));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let n=this.globParts.map((r,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=r[0]===""&&r[1]===""&&(r[2]==="?"||!Ss.test(r[2]))&&!Ss.test(r[3]),h=/^[a-z]:/i.test(r[0]);if(l)return[...r.slice(0,4),...r.slice(4).map(c=>this.parse(c))];if(h)return[r[0],...r.slice(1).map(c=>this.parse(c))]}return r.map(l=>this.parse(l))});if(this.debug(this.pattern,n),this.set=n.filter(r=>r.indexOf(!1)===-1),this.isWindows)for(let r=0;r<this.set.length;r++){let o=this.set[r];o[0]===""&&o[1]===""&&this.globParts[r][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let s=0;s<t.length;s++)for(let n=0;n<t[s].length;n++)t[s][n]==="**"&&(t[s][n]="*");let{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let s=-1;for(;(s=e.indexOf("**",s+1))!==-1;){let n=s;for(;e[n+1]==="**";)n++;n!==s&&e.splice(s,n-s)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((s,n)=>{let r=s[s.length-1];return n==="**"&&r==="**"?s:n===".."&&r&&r!==".."&&r!=="."&&r!=="**"?(s.pop(),s):(s.push(n),s)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let n=1;n<t.length-1;n++){let r=t[n];n===1&&r===""&&t[0]===""||(r==="."||r==="")&&(e=!0,t.splice(n,1),n--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let s=0;for(;(s=t.indexOf("..",s+1))!==-1;){let n=t[s-1];n&&n!=="."&&n!==".."&&n!=="**"&&(e=!0,t.splice(s-1,2),s-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let s of t){let n=-1;for(;(n=s.indexOf("**",n+1))!==-1;){let o=n;for(;s[o+1]==="**";)o++;o>n&&s.splice(n+1,o-n);let a=s[n+1],l=s[n+2],h=s[n+3];if(a!==".."||!l||l==="."||l===".."||!h||h==="."||h==="..")continue;e=!0,s.splice(n,1);let c=s.slice(0);c[n]="**",t.push(c),n--}if(!this.preserveMultipleSlashes){for(let o=1;o<s.length-1;o++){let a=s[o];o===1&&a===""&&s[0]===""||(a==="."||a==="")&&(e=!0,s.splice(o,1),o--)}s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")&&(e=!0,s.pop())}let r=0;for(;(r=s.indexOf("..",r+1))!==-1;){let o=s[r-1];if(o&&o!=="."&&o!==".."&&o!=="**"){e=!0;let l=r===1&&s[r+1]==="**"?["."]:[];s.splice(r-1,2,...l),s.length===0&&s.push(""),r-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let s=e+1;s<t.length;s++){let n=this.partsMatch(t[e],t[s],!this.preserveMultipleSlashes);n&&(t[e]=n,t[s]=[])}return t.filter(e=>e.length)}partsMatch(t,e,s=!1){let n=0,r=0,o=[],a="";for(;n<t.length&&r<e.length;)if(t[n]===e[r])o.push(a==="b"?e[r]:t[n]),n++,r++;else if(s&&t[n]==="**"&&e[r]===t[n+1])o.push(t[n]),n++;else if(s&&e[r]==="**"&&t[n]===e[r+1])o.push(e[r]),r++;else if(t[n]==="*"&&e[r]&&(this.options.dot||!e[r].startsWith("."))&&e[r]!=="**"){if(a==="b")return!1;a="a",o.push(t[n]),n++,r++}else if(e[r]==="*"&&t[n]&&(this.options.dot||!t[n].startsWith("."))&&t[n]!=="**"){if(a==="a")return!1;a="b",o.push(e[r]),n++,r++}else return!1;return t.length===e.length&&o}parseNegate(){if(this.nonegate)return;let t=this.pattern,e=!1,s=0;for(let n=0;n<t.length&&t.charAt(n)==="!";n++)e=!e,s++;s&&(this.pattern=t.slice(s)),this.negate=e}matchOne(t,e,s=!1){let n=this.options;if(this.isWindows){let p=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),w=!p&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),b=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),S=!b&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),v=w?3:p?0:void 0,y=S?3:b?0:void 0;if(typeof v=="number"&&typeof y=="number"){let[E,T]=[t[v],e[y]];E.toLowerCase()===T.toLowerCase()&&(e[y]=E,y>v?e=e.slice(y):v>y&&(t=t.slice(v)))}}let{optimizationLevel:r=1}=this.options;r>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,a=0,l=t.length,h=e.length;o<l&&a<h;o++,a++){this.debug("matchOne loop");var c=e[a],u=t[o];if(this.debug(e,c,u),c===!1)return!1;if(c===U){this.debug("GLOBSTAR",[e,c,u]);var d=o,f=a+1;if(f===h){for(this.debug("** at the end");o<l;o++)if(t[o]==="."||t[o]===".."||!n.dot&&t[o].charAt(0)===".")return!1;return!0}for(;d<l;){var g=t[d];if(this.debug(`
globstar while`,t,d,e,f,g),this.matchOne(t.slice(d),e.slice(f),s))return this.debug("globstar found match!",d,l,g),!0;if(g==="."||g===".."||!n.dot&&g.charAt(0)==="."){this.debug("dot detected!",t,d,e,f);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(s&&(this.debug(`
>>> no match, partial?`,t,d,e,f),d===l))}let p;if(typeof c=="string"?(p=u===c,this.debug("string match",c,u,p)):(p=c.test(u),this.debug("pattern match",c,u,p)),!p)return!1}if(o===l&&a===h)return!0;if(o===l)return s;if(a===h)return o===l-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return Ts(this.pattern,this.options)}parse(t){ne(t);let e=this.options;if(t==="**")return U;if(t==="")return"";let s,n=null;(s=t.match(Lr))?n=e.dot?zr:Mr:(s=t.match(Br))?n=(e.nocase?e.dot?Pr:Ir:e.dot?Rr:Tr)(s[1]):(s=t.match(jr))?n=(e.nocase?e.dot?_r:Wr:e.dot?Qr:Vr)(s):(s=t.match(Fr))?n=e.dot?Or:Dr:(s=t.match(Nr))&&(n=Ur);let r=zt.fromGlob(t,this.options).toMMPattern();return n?Object.assign(r,{test:n}):r}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let t=this.set;if(!t.length)return this.regexp=!1,this.regexp;let e=this.options,s=e.noglobstar?Hr:e.dot?Gr:Zr,n=new Set(e.nocase?["i"]:[]),r=t.map(l=>{let h=l.map(c=>{if(c instanceof RegExp)for(let u of c.flags.split(""))n.add(u);return typeof c=="string"?to(c):c===U?U:c._src});return h.forEach((c,u)=>{let d=h[u+1],f=h[u-1];c!==U||f===U||(f===void 0?d!==void 0&&d!==U?h[u+1]="(?:\\/|"+s+"\\/)?"+d:h[u]=s:d===void 0?h[u-1]=f+"(?:\\/|"+s+")?":d!==U&&(h[u-1]=f+"(?:\\/|\\/"+s+"\\/)"+d,h[u+1]=U))}),h.filter(c=>c!==U).join("/")}).join("|"),[o,a]=t.length>1?["(?:",")"]:["",""];r="^"+o+r+a+"$",this.negate&&(r="^(?!"+r+").+$");try{this.regexp=new RegExp(r,[...n].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;let s=this.options;this.isWindows&&(t=t.split("\\").join("/"));let n=this.slashSplit(t);this.debug(this.pattern,"split",n);let r=this.set;this.debug(this.pattern,"set",r);let o=n[n.length-1];if(!o)for(let a=n.length-2;!o&&a>=0;a--)o=n[a];for(let a=0;a<r.length;a++){let l=r[a],h=n;if(s.matchBase&&l.length===1&&(h=[o]),this.matchOne(h,l,e))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(t){return j.defaults(t).Minimatch}};j.AST=zt;j.Minimatch=V;j.escape=xt;j.unescape=nt;var jt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Is=new Set,di=typeof process=="object"&&process?process:{},Ps=(i,t,e,s)=>{typeof di.emitWarning=="function"?di.emitWarning(i,t,e,s):console.error(`[${e}] ${t}: ${i}`)},Ne=globalThis.AbortController,Rs=globalThis.AbortSignal;if(typeof Ne>"u"){Rs=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(s,n){this._onabort.push(n)}},Ne=class{constructor(){t()}signal=new Rs;abort(s){if(!this.signal.aborted){this.signal.reason=s,this.signal.aborted=!0;for(let n of this.signal._onabort)n(s);this.signal.onabort?.(s)}}};let i=di.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{i&&(i=!1,Ps("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var eo=i=>!Is.has(i),Ma=Symbol("type"),Ct=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),Fs=i=>Ct(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?Wt:null:null,Wt=class extends Array{constructor(t){super(t),this.fill(0)}},fi=class i{heap;length;static#t=!1;static create(t){let e=Fs(t);if(!e)return[];i.#t=!0;let s=new i(t,e);return i.#t=!1,s}constructor(t,e){if(!i.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},oe=class i{#t;#i;#r;#s;#a;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#h;#u;#l;#o;#e;#m;#A;#f;#d;#k;#g;#x;#C;#y;#w;#T;#p;static unsafeExposeInternals(t){return{starts:t.#C,ttls:t.#y,sizes:t.#x,keyMap:t.#l,keyList:t.#o,valList:t.#e,next:t.#m,prev:t.#A,get head(){return t.#f},get tail(){return t.#d},free:t.#k,isBackgroundFetch:e=>t.#c(e),backgroundFetch:(e,s,n,r)=>t.#O(e,s,n,r),moveToTail:e=>t.#D(e),indexes:e=>t.#E(e),rindexes:e=>t.#R(e),isStale:e=>t.#b(e)}}get max(){return this.#t}get maxSize(){return this.#i}get calculatedSize(){return this.#u}get size(){return this.#h}get fetchMethod(){return this.#a}get dispose(){return this.#r}get disposeAfter(){return this.#s}constructor(t){let{max:e=0,ttl:s,ttlResolution:n=1,ttlAutopurge:r,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:h,disposeAfter:c,noDisposeOnSet:u,noUpdateTTL:d,maxSize:f=0,maxEntrySize:g=0,sizeCalculation:p,fetchMethod:w,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:v,allowStaleOnFetchAbort:y,ignoreFetchAbort:E}=t;if(e!==0&&!Ct(e))throw new TypeError("max option must be a nonnegative integer");let T=e?Fs(e):Array;if(!T)throw new Error("invalid max value: "+e);if(this.#t=e,this.#i=f,this.maxEntrySize=g||this.#i,this.sizeCalculation=p,this.sizeCalculation){if(!this.#i&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(w!==void 0&&typeof w!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=w,this.#T=!!w,this.#l=new Map,this.#o=new Array(e).fill(void 0),this.#e=new Array(e).fill(void 0),this.#m=new T(e),this.#A=new T(e),this.#f=0,this.#d=0,this.#k=fi.create(e),this.#h=0,this.#u=0,typeof h=="function"&&(this.#r=h),typeof c=="function"?(this.#s=c,this.#g=[]):(this.#s=void 0,this.#g=void 0),this.#w=!!this.#r,this.#p=!!this.#s,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!b,this.allowStaleOnFetchRejection=!!v,this.allowStaleOnFetchAbort=!!y,this.ignoreFetchAbort=!!E,this.maxEntrySize!==0){if(this.#i!==0&&!Ct(this.#i))throw new TypeError("maxSize must be a positive integer if specified");if(!Ct(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#P()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Ct(n)||n===0?n:1,this.ttlAutopurge=!!r,this.ttl=s||0,this.ttl){if(!Ct(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#I()}if(this.#t===0&&this.ttl===0&&this.#i===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#i){let et="LRU_CACHE_UNBOUNDED";eo(et)&&(Is.add(et),Ps("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",et,i))}}getRemainingTTL(t){return this.#l.has(t)?1/0:0}#I(){let t=new Wt(this.#t),e=new Wt(this.#t);this.#y=t,this.#C=e,this.#n=(r,o,a=jt.now())=>{if(e[r]=o!==0?a:0,t[r]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#b(r)&&this.delete(this.#o[r])},o+1);l.unref&&l.unref()}},this.#B=r=>{e[r]=t[r]!==0?jt.now():0},this.#v=(r,o)=>{if(t[o]){let a=t[o],l=e[o];if(!a||!l)return;r.ttl=a,r.start=l,r.now=s||n();let h=r.now-l;r.remainingTTL=a-h}};let s=0,n=()=>{let r=jt.now();if(this.ttlResolution>0){s=r;let o=setTimeout(()=>s=0,this.ttlResolution);o.unref&&o.unref()}return r};this.getRemainingTTL=r=>{let o=this.#l.get(r);if(o===void 0)return 0;let a=t[o],l=e[o];if(!a||!l)return 1/0;let h=(s||n())-l;return a-h},this.#b=r=>{let o=e[r],a=t[r];return!!a&&!!o&&(s||n())-o>a}}#B=()=>{};#v=()=>{};#n=()=>{};#b=()=>!1;#P(){let t=new Wt(this.#t);this.#u=0,this.#x=t,this.#S=e=>{this.#u-=t[e],t[e]=0},this.#U=(e,s,n,r)=>{if(this.#c(s))return 0;if(!Ct(n))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(n=r(s,e),!Ct(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#N=(e,s,n)=>{if(t[e]=s,this.#i){let r=this.#i-t[e];for(;this.#u>r;)this.#F(!0)}this.#u+=t[e],n&&(n.entrySize=s,n.totalCalculatedSize=this.#u)}}#S=t=>{};#N=(t,e,s)=>{};#U=(t,e,s,n)=>{if(s||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:t=this.allowStale}={}){if(this.#h)for(let e=this.#d;!(!this.#L(e)||((t||!this.#b(e))&&(yield e),e===this.#f));)e=this.#A[e]}*#R({allowStale:t=this.allowStale}={}){if(this.#h)for(let e=this.#f;!(!this.#L(e)||((t||!this.#b(e))&&(yield e),e===this.#d));)e=this.#m[e]}#L(t){return t!==void 0&&this.#l.get(this.#o[t])===t}*entries(){for(let t of this.#E())this.#e[t]!==void 0&&this.#o[t]!==void 0&&!this.#c(this.#e[t])&&(yield[this.#o[t],this.#e[t]])}*rentries(){for(let t of this.#R())this.#e[t]!==void 0&&this.#o[t]!==void 0&&!this.#c(this.#e[t])&&(yield[this.#o[t],this.#e[t]])}*keys(){for(let t of this.#E()){let e=this.#o[t];e!==void 0&&!this.#c(this.#e[t])&&(yield e)}}*rkeys(){for(let t of this.#R()){let e=this.#o[t];e!==void 0&&!this.#c(this.#e[t])&&(yield e)}}*values(){for(let t of this.#E())this.#e[t]!==void 0&&!this.#c(this.#e[t])&&(yield this.#e[t])}*rvalues(){for(let t of this.#R())this.#e[t]!==void 0&&!this.#c(this.#e[t])&&(yield this.#e[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let s of this.#E()){let n=this.#e[s],r=this.#c(n)?n.__staleWhileFetching:n;if(r!==void 0&&t(r,this.#o[s],this))return this.get(this.#o[s],e)}}forEach(t,e=this){for(let s of this.#E()){let n=this.#e[s],r=this.#c(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#o[s],this)}}rforEach(t,e=this){for(let s of this.#R()){let n=this.#e[s],r=this.#c(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#o[s],this)}}purgeStale(){let t=!1;for(let e of this.#R({allowStale:!0}))this.#b(e)&&(this.delete(this.#o[e]),t=!0);return t}info(t){let e=this.#l.get(t);if(e===void 0)return;let s=this.#e[e],n=this.#c(s)?s.__staleWhileFetching:s;if(n===void 0)return;let r={value:n};if(this.#y&&this.#C){let o=this.#y[e],a=this.#C[e];if(o&&a){let l=o-(jt.now()-a);r.ttl=l,r.start=Date.now()}}return this.#x&&(r.size=this.#x[e]),r}dump(){let t=[];for(let e of this.#E({allowStale:!0})){let s=this.#o[e],n=this.#e[e],r=this.#c(n)?n.__staleWhileFetching:n;if(r===void 0||s===void 0)continue;let o={value:r};if(this.#y&&this.#C){o.ttl=this.#y[e];let a=jt.now()-this.#C[e];o.start=Math.floor(Date.now()-a)}this.#x&&(o.size=this.#x[e]),t.unshift([s,o])}return t}load(t){this.clear();for(let[e,s]of t){if(s.start){let n=Date.now()-s.start;s.start=jt.now()-n}this.set(e,s.value,s)}}set(t,e,s={}){if(e===void 0)return this.delete(t),this;let{ttl:n=this.ttl,start:r,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=s,{noUpdateTTL:h=this.noUpdateTTL}=s,c=this.#U(t,e,s.size||0,a);if(this.maxEntrySize&&c>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.delete(t),this;let u=this.#h===0?void 0:this.#l.get(t);if(u===void 0)u=this.#h===0?this.#d:this.#k.length!==0?this.#k.pop():this.#h===this.#t?this.#F(!1):this.#h,this.#o[u]=t,this.#e[u]=e,this.#l.set(t,u),this.#m[this.#d]=u,this.#A[u]=this.#d,this.#d=u,this.#h++,this.#N(u,c,l),l&&(l.set="add"),h=!1;else{this.#D(u);let d=this.#e[u];if(e!==d){if(this.#T&&this.#c(d)){d.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=d;f!==void 0&&!o&&(this.#w&&this.#r?.(f,t,"set"),this.#p&&this.#g?.push([f,t,"set"]))}else o||(this.#w&&this.#r?.(d,t,"set"),this.#p&&this.#g?.push([d,t,"set"]));if(this.#S(u),this.#N(u,c,l),this.#e[u]=e,l){l.set="replace";let f=d&&this.#c(d)?d.__staleWhileFetching:d;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(n!==0&&!this.#y&&this.#I(),this.#y&&(h||this.#n(u,n,r),l&&this.#v(l,u)),!o&&this.#p&&this.#g){let d=this.#g,f;for(;f=d?.shift();)this.#s?.(...f)}return this}pop(){try{for(;this.#h;){let t=this.#e[this.#f];if(this.#F(!0),this.#c(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#p&&this.#g){let t=this.#g,e;for(;e=t?.shift();)this.#s?.(...e)}}}#F(t){let e=this.#f,s=this.#o[e],n=this.#e[e];return this.#T&&this.#c(n)?n.__abortController.abort(new Error("evicted")):(this.#w||this.#p)&&(this.#w&&this.#r?.(n,s,"evict"),this.#p&&this.#g?.push([n,s,"evict"])),this.#S(e),t&&(this.#o[e]=void 0,this.#e[e]=void 0,this.#k.push(e)),this.#h===1?(this.#f=this.#d=0,this.#k.length=0):this.#f=this.#m[e],this.#l.delete(s),this.#h--,e}has(t,e={}){let{updateAgeOnHas:s=this.updateAgeOnHas,status:n}=e,r=this.#l.get(t);if(r!==void 0){let o=this.#e[r];if(this.#c(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#b(r))n&&(n.has="stale",this.#v(n,r));else return s&&this.#B(r),n&&(n.has="hit",this.#v(n,r)),!0}else n&&(n.has="miss");return!1}peek(t,e={}){let{allowStale:s=this.allowStale}=e,n=this.#l.get(t);if(n===void 0||!s&&this.#b(n))return;let r=this.#e[n];return this.#c(r)?r.__staleWhileFetching:r}#O(t,e,s,n){let r=e===void 0?void 0:this.#e[e];if(this.#c(r))return r;let o=new Ne,{signal:a}=s;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:s,context:n},h=(p,w=!1)=>{let{aborted:b}=o.signal,S=s.ignoreFetchAbort&&p!==void 0;if(s.status&&(b&&!w?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,S&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),b&&!S&&!w)return u(o.signal.reason);let v=f;return this.#e[e]===f&&(p===void 0?v.__staleWhileFetching?this.#e[e]=v.__staleWhileFetching:this.delete(t):(s.status&&(s.status.fetchUpdated=!0),this.set(t,p,l.options))),p},c=p=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=p),u(p)),u=p=>{let{aborted:w}=o.signal,b=w&&s.allowStaleOnFetchAbort,S=b||s.allowStaleOnFetchRejection,v=S||s.noDeleteOnFetchRejection,y=f;if(this.#e[e]===f&&(!v||y.__staleWhileFetching===void 0?this.delete(t):b||(this.#e[e]=y.__staleWhileFetching)),S)return s.status&&y.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),y.__staleWhileFetching;if(y.__returned===y)throw p},d=(p,w)=>{let b=this.#a?.(t,r,l);b&&b instanceof Promise&&b.then(S=>p(S===void 0?void 0:S),w),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(p(void 0),s.allowStaleOnFetchAbort&&(p=S=>h(S,!0)))})};s.status&&(s.status.fetchDispatched=!0);let f=new Promise(d).then(h,c),g=Object.assign(f,{__abortController:o,__staleWhileFetching:r,__returned:void 0});return e===void 0?(this.set(t,g,{...l.options,status:void 0}),e=this.#l.get(t)):this.#e[e]=g,g}#c(t){if(!this.#T)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Ne}async fetch(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:p,forceRefresh:w=!1,status:b,signal:S}=e;if(!this.#T)return b&&(b.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:r,status:b});let v={allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:r,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:h,noUpdateTTL:c,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:g,ignoreFetchAbort:f,status:b,signal:S},y=this.#l.get(t);if(y===void 0){b&&(b.fetch="miss");let E=this.#O(t,y,v,p);return E.__returned=E}else{let E=this.#e[y];if(this.#c(E)){let Re=s&&E.__staleWhileFetching!==void 0;return b&&(b.fetch="inflight",Re&&(b.returnedStale=!0)),Re?E.__staleWhileFetching:E.__returned=E}let T=this.#b(y);if(!w&&!T)return b&&(b.fetch="hit"),this.#D(y),n&&this.#B(y),b&&this.#v(b,y),E;let et=this.#O(t,y,v,p),ct=et.__staleWhileFetching!==void 0&&s;return b&&(b.fetch=T?"stale":"refresh",ct&&T&&(b.returnedStale=!0)),ct?et.__staleWhileFetching:et.__returned=et}}get(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:o}=e,a=this.#l.get(t);if(a!==void 0){let l=this.#e[a],h=this.#c(l);return o&&this.#v(o,a),this.#b(a)?(o&&(o.get="stale"),h?(o&&s&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),s?l.__staleWhileFetching:void 0):(r||this.delete(t),o&&s&&(o.returnedStale=!0),s?l:void 0)):(o&&(o.get="hit"),h?l.__staleWhileFetching:(this.#D(a),n&&this.#B(a),l))}else o&&(o.get="miss")}#M(t,e){this.#A[e]=t,this.#m[t]=e}#D(t){t!==this.#d&&(t===this.#f?this.#f=this.#m[t]:this.#M(this.#A[t],this.#m[t]),this.#M(this.#d,t),this.#d=t)}delete(t){let e=!1;if(this.#h!==0){let s=this.#l.get(t);if(s!==void 0)if(e=!0,this.#h===1)this.clear();else{this.#S(s);let n=this.#e[s];if(this.#c(n)?n.__abortController.abort(new Error("deleted")):(this.#w||this.#p)&&(this.#w&&this.#r?.(n,t,"delete"),this.#p&&this.#g?.push([n,t,"delete"])),this.#l.delete(t),this.#o[s]=void 0,this.#e[s]=void 0,s===this.#d)this.#d=this.#A[s];else if(s===this.#f)this.#f=this.#m[s];else{let r=this.#A[s];this.#m[r]=this.#m[s];let o=this.#m[s];this.#A[o]=this.#A[s]}this.#h--,this.#k.push(s)}}if(this.#p&&this.#g?.length){let s=this.#g,n;for(;n=s?.shift();)this.#s?.(...n)}return e}clear(){for(let t of this.#R({allowStale:!0})){let e=this.#e[t];if(this.#c(e))e.__abortController.abort(new Error("deleted"));else{let s=this.#o[t];this.#w&&this.#r?.(e,s,"delete"),this.#p&&this.#g?.push([e,s,"delete"])}}if(this.#l.clear(),this.#e.fill(void 0),this.#o.fill(void 0),this.#y&&this.#C&&(this.#y.fill(0),this.#C.fill(0)),this.#x&&this.#x.fill(0),this.#f=0,this.#d=0,this.#k.length=0,this.#u=0,this.#h=0,this.#p&&this.#g){let t=this.#g,e;for(;e=t?.shift();)this.#s?.(...e)}}};var Vt=require("path"),_s=require("url"),uo=Lt(require("fs"),1),ft=require("fs"),Rt=require("fs/promises");var _e=require("events"),ki=Lt(require("stream"),1),Ls=require("string_decoder"),Ds=typeof process=="object"&&process?process:{stdout:null,stderr:null},io=i=>!!i&&typeof i=="object"&&(i instanceof Tt||i instanceof ki.default||so(i)||no(i)),so=i=>!!i&&typeof i=="object"&&i instanceof _e.EventEmitter&&typeof i.pipe=="function"&&i.pipe!==ki.default.Writable.prototype.pipe,no=i=>!!i&&typeof i=="object"&&i instanceof _e.EventEmitter&&typeof i.write=="function"&&typeof i.end=="function",wt=Symbol("EOF"),kt=Symbol("maybeEmitEnd"),Bt=Symbol("emittedEnd"),Ue=Symbol("emittingEnd"),ae=Symbol("emittedError"),Le=Symbol("closed"),Os=Symbol("read"),Me=Symbol("flush"),Ns=Symbol("flushChunk"),rt=Symbol("encoding"),_t=Symbol("decoder"),P=Symbol("flowing"),le=Symbol("paused"),Qt=Symbol("resume"),F=Symbol("buffer"),W=Symbol("pipes"),D=Symbol("bufferLength"),pi=Symbol("bufferPush"),ze=Symbol("bufferShift"),M=Symbol("objectMode"),B=Symbol("destroyed"),mi=Symbol("error"),gi=Symbol("emitData"),Us=Symbol("emitEnd"),Ai=Symbol("emitEnd2"),ut=Symbol("async"),bi=Symbol("abort"),je=Symbol("aborted"),he=Symbol("signal"),Ot=Symbol("dataListeners"),$=Symbol("discarded"),ce=i=>Promise.resolve().then(i),ro=i=>i(),oo=i=>i==="end"||i==="finish"||i==="prefinish",ao=i=>i instanceof ArrayBuffer||!!i&&typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,lo=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),We=class{src;dest;opts;ondrain;constructor(t,e,s){this.src=t,this.dest=e,this.opts=s,this.ondrain=()=>t[Qt](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},wi=class extends We{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,s){super(t,e,s),this.proxyErrors=n=>e.emit("error",n),t.on("error",this.proxyErrors)}},ho=i=>!!i.objectMode,co=i=>!i.objectMode&&!!i.encoding&&i.encoding!=="buffer",Tt=class extends _e.EventEmitter{[P]=!1;[le]=!1;[W]=[];[F]=[];[M];[rt];[ut];[_t];[wt]=!1;[Bt]=!1;[Ue]=!1;[Le]=!1;[ae]=null;[D]=0;[B]=!1;[he];[je]=!1;[Ot]=0;[$]=!1;writable=!0;readable=!0;constructor(...t){let e=t[0]||{};if(super(),e.objectMode&&typeof e.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");ho(e)?(this[M]=!0,this[rt]=null):co(e)?(this[rt]=e.encoding,this[M]=!1):(this[M]=!1,this[rt]=null),this[ut]=!!e.async,this[_t]=this[rt]?new Ls.StringDecoder(this[rt]):null,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[F]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[W]});let{signal:s}=e;s&&(this[he]=s,s.aborted?this[bi]():s.addEventListener("abort",()=>this[bi]()))}get bufferLength(){return this[D]}get encoding(){return this[rt]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[M]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ut]}set async(t){this[ut]=this[ut]||!!t}[bi](){this[je]=!0,this.emit("abort",this[he]?.reason),this.destroy(this[he]?.reason)}get aborted(){return this[je]}set aborted(t){}write(t,e,s){if(this[je])return!1;if(this[wt])throw new Error("write after end");if(this[B])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof e=="function"&&(s=e,e="utf8"),e||(e="utf8");let n=this[ut]?ce:ro;if(!this[M]&&!Buffer.isBuffer(t)){if(lo(t))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if(ao(t))t=Buffer.from(t);else if(typeof t!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[M]?(this[P]&&this[D]!==0&&this[Me](!0),this[P]?this.emit("data",t):this[pi](t),this[D]!==0&&this.emit("readable"),s&&n(s),this[P]):t.length?(typeof t=="string"&&!(e===this[rt]&&!this[_t]?.lastNeed)&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[rt]&&(t=this[_t].write(t)),this[P]&&this[D]!==0&&this[Me](!0),this[P]?this.emit("data",t):this[pi](t),this[D]!==0&&this.emit("readable"),s&&n(s),this[P]):(this[D]!==0&&this.emit("readable"),s&&n(s),this[P])}read(t){if(this[B])return null;if(this[$]=!1,this[D]===0||t===0||t&&t>this[D])return this[kt](),null;this[M]&&(t=null),this[F].length>1&&!this[M]&&(this[F]=[this[rt]?this[F].join(""):Buffer.concat(this[F],this[D])]);let e=this[Os](t||null,this[F][0]);return this[kt](),e}[Os](t,e){if(this[M])this[ze]();else{let s=e;t===s.length||t===null?this[ze]():typeof s=="string"?(this[F][0]=s.slice(t),e=s.slice(0,t),this[D]-=t):(this[F][0]=s.subarray(t),e=s.subarray(0,t),this[D]-=t)}return this.emit("data",e),!this[F].length&&!this[wt]&&this.emit("drain"),e}end(t,e,s){return typeof t=="function"&&(s=t,t=void 0),typeof e=="function"&&(s=e,e="utf8"),t!==void 0&&this.write(t,e),s&&this.once("end",s),this[wt]=!0,this.writable=!1,(this[P]||!this[le])&&this[kt](),this}[Qt](){this[B]||(!this[Ot]&&!this[W].length&&(this[$]=!0),this[le]=!1,this[P]=!0,this.emit("resume"),this[F].length?this[Me]():this[wt]?this[kt]():this.emit("drain"))}resume(){return this[Qt]()}pause(){this[P]=!1,this[le]=!0,this[$]=!1}get destroyed(){return this[B]}get flowing(){return this[P]}get paused(){return this[le]}[pi](t){this[M]?this[D]+=1:this[D]+=t.length,this[F].push(t)}[ze](){return this[M]?this[D]-=1:this[D]-=this[F][0].length,this[F].shift()}[Me](t=!1){do;while(this[Ns](this[ze]())&&this[F].length);!t&&!this[F].length&&!this[wt]&&this.emit("drain")}[Ns](t){return this.emit("data",t),this[P]}pipe(t,e){if(this[B])return t;this[$]=!1;let s=this[Bt];return e=e||{},t===Ds.stdout||t===Ds.stderr?e.end=!1:e.end=e.end!==!1,e.proxyErrors=!!e.proxyErrors,s?e.end&&t.end():(this[W].push(e.proxyErrors?new wi(this,t,e):new We(this,t,e)),this[ut]?ce(()=>this[Qt]()):this[Qt]()),t}unpipe(t){let e=this[W].find(s=>s.dest===t);e&&(this[W].length===1?(this[P]&&this[Ot]===0&&(this[P]=!1),this[W]=[]):this[W].splice(this[W].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){let s=super.on(t,e);if(t==="data")this[$]=!1,this[Ot]++,!this[W].length&&!this[P]&&this[Qt]();else if(t==="readable"&&this[D]!==0)super.emit("readable");else if(oo(t)&&this[Bt])super.emit(t),this.removeAllListeners(t);else if(t==="error"&&this[ae]){let n=e;this[ut]?ce(()=>n.call(this,this[ae])):n.call(this,this[ae])}return s}removeListener(t,e){return this.off(t,e)}off(t,e){let s=super.off(t,e);return t==="data"&&(this[Ot]=this.listeners("data").length,this[Ot]===0&&!this[$]&&!this[W].length&&(this[P]=!1)),s}removeAllListeners(t){let e=super.removeAllListeners(t);return(t==="data"||t===void 0)&&(this[Ot]=0,!this[$]&&!this[W].length&&(this[P]=!1)),e}get emittedEnd(){return this[Bt]}[kt](){!this[Ue]&&!this[Bt]&&!this[B]&&this[F].length===0&&this[wt]&&(this[Ue]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Le]&&this.emit("close"),this[Ue]=!1)}emit(t,...e){let s=e[0];if(t!=="error"&&t!=="close"&&t!==B&&this[B])return!1;if(t==="data")return!this[M]&&!s?!1:this[ut]?(ce(()=>this[gi](s)),!0):this[gi](s);if(t==="end")return this[Us]();if(t==="close"){if(this[Le]=!0,!this[Bt]&&!this[B])return!1;let r=super.emit("close");return this.removeAllListeners("close"),r}else if(t==="error"){this[ae]=s,super.emit(mi,s);let r=!this[he]||this.listeners("error").length?super.emit("error",s):!1;return this[kt](),r}else if(t==="resume"){let r=super.emit("resume");return this[kt](),r}else if(t==="finish"||t==="prefinish"){let r=super.emit(t);return this.removeAllListeners(t),r}let n=super.emit(t,...e);return this[kt](),n}[gi](t){for(let s of this[W])s.dest.write(t)===!1&&this.pause();let e=this[$]?!1:super.emit("data",t);return this[kt](),e}[Us](){return this[Bt]?!1:(this[Bt]=!0,this.readable=!1,this[ut]?(ce(()=>this[Ai]()),!0):this[Ai]())}[Ai](){if(this[_t]){let e=this[_t].end();if(e){for(let s of this[W])s.dest.write(e);this[$]||super.emit("data",e)}}for(let e of this[W])e.end();let t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){let t=Object.assign([],{dataLength:0});this[M]||(t.dataLength=0);let e=this.promise();return this.on("data",s=>{t.push(s),this[M]||(t.dataLength+=s.length)}),await e,t}async concat(){if(this[M])throw new Error("cannot concat in objectMode");let t=await this.collect();return this[rt]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise((t,e)=>{this.on(B,()=>e(new Error("stream destroyed"))),this.on("error",s=>e(s)),this.on("end",()=>t())})}[Symbol.asyncIterator](){this[$]=!1;let t=!1,e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[wt])return e();let r,o,a=u=>{this.off("data",l),this.off("end",h),this.off(B,c),e(),o(u)},l=u=>{this.off("error",a),this.off("end",h),this.off(B,c),this.pause(),r({value:u,done:!!this[wt]})},h=()=>{this.off("error",a),this.off("data",l),this.off(B,c),e(),r({done:!0,value:void 0})},c=()=>a(new Error("stream destroyed"));return new Promise((u,d)=>{o=d,r=u,this.once(B,c),this.once("error",a),this.once("end",h),this.once("data",l)})},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[$]=!1;let t=!1,e=()=>(this.pause(),this.off(mi,e),this.off(B,e),this.off("end",e),t=!0,{done:!0,value:void 0}),s=()=>{if(t)return e();let n=this.read();return n===null?e():{done:!1,value:n}};return this.once("end",e),this.once(mi,e),this.once(B,e),{next:s,throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){if(this[B])return t?this.emit("error",t):this.emit(B),this;this[B]=!0,this[$]=!0,this[F].length=0,this[D]=0;let e=this;return typeof e.close=="function"&&!this[Le]&&e.close(),t?this.emit("error",t):this.emit(B),this}static get isStream(){return io}};var fo=ft.realpathSync.native,de={lstatSync:ft.lstatSync,readdir:ft.readdir,readdirSync:ft.readdirSync,readlinkSync:ft.readlinkSync,realpathSync:fo,promises:{lstat:Rt.lstat,readdir:Rt.readdir,readlink:Rt.readlink,realpath:Rt.realpath}},Qs=i=>!i||i===de||i===uo?de:{...de,...i,promises:{...de.promises,...i.promises||{}}},Vs=/^\\\\\?\\([a-z]:)\\?$/i,po=i=>i.replace(/\//g,"\\").replace(Vs,"$1\\"),mo=/[\\\/]/,Y=0,$s=1,Xs=2,dt=4,Hs=6,Gs=8,Nt=10,Zs=12,q=15,ue=~q,yi=16,Ms=32,fe=64,ot=128,Qe=256,$e=512,zs=fe|ot|$e,go=1023,vi=i=>i.isFile()?Gs:i.isDirectory()?dt:i.isSymbolicLink()?Nt:i.isCharacterDevice()?Xs:i.isBlockDevice()?Hs:i.isSocket()?Zs:i.isFIFO()?$s:Y,js=new Map,pe=i=>{let t=js.get(i);if(t)return t;let e=i.normalize("NFKD");return js.set(i,e),e},Ws=new Map,Ve=i=>{let t=Ws.get(i);if(t)return t;let e=pe(i.toLowerCase());return Ws.set(i,e),e},Xe=class extends oe{constructor(){super({max:256})}},Si=class extends oe{constructor(t=16*1024){super({maxSize:t,sizeCalculation:e=>e.length+1})}},qs=Symbol("PathScurry setAsCwd"),z=class{name;root;roots;parent;nocase;#t;#i;get dev(){return this.#i}#r;get mode(){return this.#r}#s;get nlink(){return this.#s}#a;get uid(){return this.#a}#h;get gid(){return this.#h}#u;get rdev(){return this.#u}#l;get blksize(){return this.#l}#o;get ino(){return this.#o}#e;get size(){return this.#e}#m;get blocks(){return this.#m}#A;get atimeMs(){return this.#A}#f;get mtimeMs(){return this.#f}#d;get ctimeMs(){return this.#d}#k;get birthtimeMs(){return this.#k}#g;get atime(){return this.#g}#x;get mtime(){return this.#x}#C;get ctime(){return this.#C}#y;get birthtime(){return this.#y}#w;#T;#p;#I;#B;#v;#n;#b;#P;#S;get path(){return(this.parent||this).fullpath()}constructor(t,e=Y,s,n,r,o,a){this.name=t,this.#w=r?Ve(t):pe(t),this.#n=e&go,this.nocase=r,this.roots=n,this.root=s||this,this.#b=o,this.#p=a.fullpath,this.#B=a.relative,this.#v=a.relativePosix,this.parent=a.parent,this.parent?this.#t=this.parent.#t:this.#t=Qs(a.fs)}depth(){return this.#T!==void 0?this.#T:this.parent?this.#T=this.parent.depth()+1:this.#T=0}childrenCache(){return this.#b}resolve(t){if(!t)return this;let e=this.getRootString(t),n=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#N(n):this.#N(n)}#N(t){let e=this;for(let s of t)e=e.child(s);return e}children(){let t=this.#b.get(this);if(t)return t;let e=Object.assign([],{provisional:0});return this.#b.set(this,e),this.#n&=~yi,e}child(t,e){if(t===""||t===".")return this;if(t==="..")return this.parent||this;let s=this.children(),n=this.nocase?Ve(t):pe(t);for(let l of s)if(l.#w===n)return l;let r=this.parent?this.sep:"",o=this.#p?this.#p+r+t:void 0,a=this.newChild(t,Y,{...e,parent:this,fullpath:o});return this.canReaddir()||(a.#n|=ot),s.push(a),a}relative(){if(this.#B!==void 0)return this.#B;let t=this.name,e=this.parent;if(!e)return this.#B=this.name;let s=e.relative();return s+(!s||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.#v!==void 0)return this.#v;let t=this.name,e=this.parent;if(!e)return this.#v=this.fullpathPosix();let s=e.relativePosix();return s+(!s||!e.parent?"":"/")+t}fullpath(){if(this.#p!==void 0)return this.#p;let t=this.name,e=this.parent;if(!e)return this.#p=this.name;let n=e.fullpath()+(e.parent?this.sep:"")+t;return this.#p=n}fullpathPosix(){if(this.#I!==void 0)return this.#I;if(this.sep==="/")return this.#I=this.fullpath();if(!this.parent){let n=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(n)?this.#I=`//?/${n}`:this.#I=n}let t=this.parent,e=t.fullpathPosix(),s=e+(!e||!t.parent?"":"/")+this.name;return this.#I=s}isUnknown(){return(this.#n&q)===Y}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#n&q)===Gs}isDirectory(){return(this.#n&q)===dt}isCharacterDevice(){return(this.#n&q)===Xs}isBlockDevice(){return(this.#n&q)===Hs}isFIFO(){return(this.#n&q)===$s}isSocket(){return(this.#n&q)===Zs}isSymbolicLink(){return(this.#n&Nt)===Nt}lstatCached(){return this.#n&Ms?this:void 0}readlinkCached(){return this.#P}realpathCached(){return this.#S}readdirCached(){let t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#P)return!0;if(!this.parent)return!1;let t=this.#n&q;return!(t!==Y&&t!==Nt||this.#n&Qe||this.#n&ot)}calledReaddir(){return!!(this.#n&yi)}isENOENT(){return!!(this.#n&ot)}isNamed(t){return this.nocase?this.#w===Ve(t):this.#w===pe(t)}async readlink(){let t=this.#P;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=await this.#t.promises.readlink(this.fullpath()),s=(await this.parent.realpath())?.resolve(e);if(s)return this.#P=s}catch(e){this.#M(e.code);return}}readlinkSync(){let t=this.#P;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=this.#t.readlinkSync(this.fullpath()),s=this.parent.realpathSync()?.resolve(e);if(s)return this.#P=s}catch(e){this.#M(e.code);return}}#U(t){this.#n|=yi;for(let e=t.provisional;e<t.length;e++){let s=t[e];s&&s.#E()}}#E(){this.#n&ot||(this.#n=(this.#n|ot)&ue,this.#R())}#R(){let t=this.children();t.provisional=0;for(let e of t)e.#E()}#L(){this.#n|=$e,this.#F()}#F(){if(this.#n&fe)return;let t=this.#n;(t&q)===dt&&(t&=ue),this.#n=t|fe,this.#R()}#O(t=""){t==="ENOTDIR"||t==="EPERM"?this.#F():t==="ENOENT"?this.#E():this.children().provisional=0}#c(t=""){t==="ENOTDIR"?this.parent.#F():t==="ENOENT"&&this.#E()}#M(t=""){let e=this.#n;e|=Qe,t==="ENOENT"&&(e|=ot),(t==="EINVAL"||t==="UNKNOWN")&&(e&=ue),this.#n=e,t==="ENOTDIR"&&this.parent&&this.parent.#F()}#D(t,e){return this.#V(t,e)||this.#Q(t,e)}#Q(t,e){let s=vi(t),n=this.newChild(t.name,s,{parent:this}),r=n.#n&q;return r!==dt&&r!==Nt&&r!==Y&&(n.#n|=fe),e.unshift(n),e.provisional++,n}#V(t,e){for(let s=e.provisional;s<e.length;s++){let n=e[s];if((this.nocase?Ve(t.name):pe(t.name))===n.#w)return this.#$(t,n,s,e)}}#$(t,e,s,n){let r=e.name;return e.#n=e.#n&ue|vi(t),r!==t.name&&(e.name=t.name),s!==n.provisional&&(s===n.length-1?n.pop():n.splice(s,1),n.unshift(e)),n.provisional++,e}async lstat(){if(!(this.#n&ot))try{return this.#_(await this.#t.promises.lstat(this.fullpath())),this}catch(t){this.#c(t.code)}}lstatSync(){if(!(this.#n&ot))try{return this.#_(this.#t.lstatSync(this.fullpath())),this}catch(t){this.#c(t.code)}}#_(t){let{atime:e,atimeMs:s,birthtime:n,birthtimeMs:r,blksize:o,blocks:a,ctime:l,ctimeMs:h,dev:c,gid:u,ino:d,mode:f,mtime:g,mtimeMs:p,nlink:w,rdev:b,size:S,uid:v}=t;this.#g=e,this.#A=s,this.#y=n,this.#k=r,this.#l=o,this.#m=a,this.#C=l,this.#d=h,this.#i=c,this.#h=u,this.#o=d,this.#r=f,this.#x=g,this.#f=p,this.#s=w,this.#u=b,this.#e=S,this.#a=v;let y=vi(t);this.#n=this.#n&ue|y|Ms,y!==Y&&y!==dt&&y!==Nt&&(this.#n|=fe)}#j=[];#W=!1;#X(t){this.#W=!1;let e=this.#j.slice();this.#j.length=0,e.forEach(s=>s(null,t))}readdirCB(t,e=!1){if(!this.canReaddir()){e?t(null,[]):queueMicrotask(()=>t(null,[]));return}let s=this.children();if(this.calledReaddir()){let r=s.slice(0,s.provisional);e?t(null,r):queueMicrotask(()=>t(null,r));return}if(this.#j.push(t),this.#W)return;this.#W=!0;let n=this.fullpath();this.#t.readdir(n,{withFileTypes:!0},(r,o)=>{if(r)this.#O(r.code),s.provisional=0;else{for(let a of o)this.#D(a,s);this.#U(s)}this.#X(s.slice(0,s.provisional))})}#z;async readdir(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();if(this.#z)await this.#z;else{let s=()=>{};this.#z=new Promise(n=>s=n);try{for(let n of await this.#t.promises.readdir(e,{withFileTypes:!0}))this.#D(n,t);this.#U(t)}catch(n){this.#O(n.code),t.provisional=0}this.#z=void 0,s()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();try{for(let s of this.#t.readdirSync(e,{withFileTypes:!0}))this.#D(s,t);this.#U(t)}catch(s){this.#O(s.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#n&zs)return!1;let t=q&this.#n;return t===Y||t===dt||t===Nt}shouldWalk(t,e){return(this.#n&dt)===dt&&!(this.#n&zs)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#S)return this.#S;if(!(($e|Qe|ot)&this.#n))try{let t=await this.#t.promises.realpath(this.fullpath());return this.#S=this.resolve(t)}catch{this.#L()}}realpathSync(){if(this.#S)return this.#S;if(!(($e|Qe|ot)&this.#n))try{let t=this.#t.realpathSync(this.fullpath());return this.#S=this.resolve(t)}catch{this.#L()}}[qs](t){if(t===this)return;let e=new Set([]),s=[],n=this;for(;n&&n.parent;)e.add(n),n.#B=s.join(this.sep),n.#v=s.join("/"),n=n.parent,s.push("..");for(n=t;n&&n.parent&&!e.has(n);)n.#B=void 0,n.#v=void 0,n=n.parent}},He=class i extends z{sep="\\";splitSep=mo;constructor(t,e=Y,s,n,r,o,a){super(t,e,s,n,r,o,a)}newChild(t,e=Y,s={}){return new i(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}getRootString(t){return Vt.win32.parse(t).root}getRoot(t){if(t=po(t.toUpperCase()),t===this.root.name)return this.root;for(let[e,s]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=s;return this.roots[t]=new $t(t,this).root}sameRoot(t,e=this.root.name){return t=t.toUpperCase().replace(/\//g,"\\").replace(Vs,"$1\\"),t===e}},Ge=class i extends z{splitSep="/";sep="/";constructor(t,e=Y,s,n,r,o,a){super(t,e,s,n,r,o,a)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=Y,s={}){return new i(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}},Ze=class{root;rootPath;roots;cwd;#t;#i;#r;nocase;#s;constructor(t=process.cwd(),e,s,{nocase:n,childrenCacheSize:r=16*1024,fs:o=de}={}){this.#s=Qs(o),(t instanceof URL||t.startsWith("file://"))&&(t=(0,_s.fileURLToPath)(t));let a=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#t=new Xe,this.#i=new Xe,this.#r=new Si(r);let l=a.substring(this.rootPath.length).split(s);if(l.length===1&&!l[0]&&l.pop(),n===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#s),this.roots[this.rootPath]=this.root;let h=this.root,c=l.length-1,u=e.sep,d=this.rootPath,f=!1;for(let g of l){let p=c--;h=h.child(g,{relative:new Array(p).fill("..").join(u),relativePosix:new Array(p).fill("..").join("/"),fullpath:d+=(f?"":u)+g}),f=!0}this.cwd=h}depth(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#r}resolve(...t){let e="";for(let r=t.length-1;r>=0;r--){let o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let s=this.#t.get(e);if(s!==void 0)return s;let n=this.cwd.resolve(e).fullpath();return this.#t.set(e,n),n}resolvePosix(...t){let e="";for(let r=t.length-1;r>=0;r--){let o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let s=this.#i.get(e);if(s!==void 0)return s;let n=this.cwd.resolve(e).fullpathPosix();return this.#i.set(e,n),n}relative(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t,t=this.cwd);let{withFileTypes:s}=e;if(t.canReaddir()){let n=await t.readdir();return s?n:n.map(r=>r.name)}else return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t,t=this.cwd);let{withFileTypes:s=!0}=e;return t.canReaddir()?s?t.readdirSync():t.readdirSync().map(n=>n.name):[]}async lstat(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t.withFileTypes,t=this.cwd);let s=await t.readlink();return e?s:s?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t.withFileTypes,t=this.cwd);let s=t.readlinkSync();return e?s:s?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t.withFileTypes,t=this.cwd);let s=await t.realpath();return e?s:s?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t.withFileTypes,t=this.cwd);let s=t.realpathSync();return e?s:s?.fullpath()}async walk(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(s?t:t.fullpath());let l=new Set,h=(u,d)=>{l.add(u),u.readdirCB((f,g)=>{if(f)return d(f);let p=g.length;if(!p)return d();let w=()=>{--p===0&&d()};for(let b of g)(!r||r(b))&&a.push(s?b:b.fullpath()),n&&b.isSymbolicLink()?b.realpath().then(S=>S?.isUnknown()?S.lstat():S).then(S=>S?.shouldWalk(l,o)?h(S,w):w()):b.shouldWalk(l,o)?h(b,w):w()},!0)},c=t;return new Promise((u,d)=>{h(c,f=>{if(f)return d(f);u(a)})})}walkSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(s?t:t.fullpath());let l=new Set([t]);for(let h of l){let c=h.readdirSync();for(let u of c){(!r||r(u))&&a.push(s?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(n&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(l,o)&&l.add(d)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e;(!r||r(t))&&(yield s?t:t.fullpath());let a=new Set([t]);for(let l of a){let h=l.readdirSync();for(let c of h){(!r||r(c))&&(yield s?c:c.fullpath());let u=c;if(c.isSymbolicLink()){if(!(n&&(u=c.realpathSync())))continue;u.isUnknown()&&u.lstatSync()}u.shouldWalk(a,o)&&a.add(u)}}}stream(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new Tt({objectMode:!0});(!r||r(t))&&a.write(s?t:t.fullpath());let l=new Set,h=[t],c=0,u=()=>{let d=!1;for(;!d;){let f=h.shift();if(!f){c===0&&a.end();return}c++,l.add(f);let g=(w,b,S=!1)=>{if(w)return a.emit("error",w);if(n&&!S){let v=[];for(let y of b)y.isSymbolicLink()&&v.push(y.realpath().then(E=>E?.isUnknown()?E.lstat():E));if(v.length){Promise.all(v).then(()=>g(null,b,!0));return}}for(let v of b)v&&(!r||r(v))&&(a.write(s?v:v.fullpath())||(d=!0));c--;for(let v of b){let y=v.realpathCached()||v;y.shouldWalk(l,o)&&h.push(y)}d&&!a.flowing?a.once("drain",u):p||u()},p=!0;f.readdirCB(g,!0),p=!1}};return u(),a}streamSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof z||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new Tt({objectMode:!0}),l=new Set;(!r||r(t))&&a.write(s?t:t.fullpath());let h=[t],c=0,u=()=>{let d=!1;for(;!d;){let f=h.shift();if(!f){c===0&&a.end();return}c++,l.add(f);let g=f.readdirSync();for(let p of g)(!r||r(p))&&(a.write(s?p:p.fullpath())||(d=!0));c--;for(let p of g){let w=p;if(p.isSymbolicLink()){if(!(n&&(w=p.realpathSync())))continue;w.isUnknown()&&w.lstatSync()}w.shouldWalk(l,o)&&h.push(w)}}d&&!a.flowing&&a.once("drain",u)};return u(),a}chdir(t=this.cwd){let e=this.cwd;this.cwd=typeof t=="string"?this.cwd.resolve(t):t,this.cwd[qs](e)}},$t=class extends Ze{sep="\\";constructor(t=process.cwd(),e={}){let{nocase:s=!0}=e;super(t,Vt.win32,"\\",{...e,nocase:s}),this.nocase=s;for(let n=this.cwd;n;n=n.parent)n.nocase=this.nocase}parseRootPath(t){return Vt.win32.parse(t).root.toUpperCase()}newRoot(t){return new He(this.rootPath,dt,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}},Xt=class extends Ze{sep="/";constructor(t=process.cwd(),e={}){let{nocase:s=!1}=e;super(t,Vt.posix,"/",{...e,nocase:s}),this.nocase=s}parseRootPath(t){return"/"}newRoot(t){return new Ge(this.rootPath,dt,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}},me=class extends Xt{constructor(t=process.cwd(),e={}){let{nocase:s=!0}=e;super(t,{...e,nocase:s})}},Qa=process.platform==="win32"?He:Ge,Ys=process.platform==="win32"?$t:process.platform==="darwin"?me:Xt;var Js=require("url");var Ao=i=>i.length>=1,bo=i=>i.length>=1,Ht=class i{#t;#i;#r;length;#s;#a;#h;#u;#l;#o;#e=!0;constructor(t,e,s,n){if(!Ao(t))throw new TypeError("empty pattern list");if(!bo(e))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,s<0||s>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#i=e,this.#r=s,this.#s=n,this.#r===0){if(this.isUNC()){let[r,o,a,l,...h]=this.#t,[c,u,d,f,...g]=this.#i;h[0]===""&&(h.shift(),g.shift());let p=[r,o,a,l,""].join("/"),w=[c,u,d,f,""].join("/");this.#t=[p,...h],this.#i=[w,...g],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){let[r,...o]=this.#t,[a,...l]=this.#i;o[0]===""&&(o.shift(),l.shift());let h=r+"/",c=a+"/";this.#t=[h,...o],this.#i=[c,...l],this.length=this.#t.length}}}pattern(){return this.#t[this.#r]}isString(){return typeof this.#t[this.#r]=="string"}isGlobstar(){return this.#t[this.#r]===U}isRegExp(){return this.#t[this.#r]instanceof RegExp}globString(){return this.#h=this.#h||(this.#r===0?this.isAbsolute()?this.#i[0]+this.#i.slice(1).join("/"):this.#i.join("/"):this.#i.slice(this.#r).join("/"))}hasMore(){return this.length>this.#r+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new i(this.#t,this.#i,this.#r+1,this.#s),this.#a.#o=this.#o,this.#a.#l=this.#l,this.#a.#u=this.#u,this.#a):this.#a=null}isUNC(){let t=this.#t;return this.#l!==void 0?this.#l:this.#l=this.#s==="win32"&&this.#r===0&&t[0]===""&&t[1]===""&&typeof t[2]=="string"&&!!t[2]&&typeof t[3]=="string"&&!!t[3]}isDrive(){let t=this.#t;return this.#u!==void 0?this.#u:this.#u=this.#s==="win32"&&this.#r===0&&this.length>1&&typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){let t=this.#t;return this.#o!==void 0?this.#o:this.#o=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){let t=this.#t[0];return typeof t=="string"&&this.isAbsolute()&&this.#r===0?t:""}checkFollowGlobstar(){return!(this.#r===0||!this.isGlobstar()||!this.#e)}markFollowGlobstar(){return this.#r===0||!this.isGlobstar()||!this.#e?!1:(this.#e=!1,!0)}};var wo=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",ge=class{relative;relativeChildren;absolute;absoluteChildren;constructor(t,{nobrace:e,nocase:s,noext:n,noglobstar:r,platform:o=wo}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];let a={dot:!0,nobrace:e,nocase:s,noext:n,noglobstar:r,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let l of t){let h=new V(l,a);for(let c=0;c<h.set.length;c++){let u=h.set[c],d=h.globParts[c];if(!u||!d)throw new Error("invalid pattern object");for(;u[0]==="."&&d[0]===".";)u.shift(),d.shift();let f=new Ht(u,d,0,o),g=new V(f.globString(),a),p=d[d.length-1]==="**",w=f.isAbsolute();w?this.absolute.push(g):this.relative.push(g),p&&(w?this.absoluteChildren.push(g):this.relativeChildren.push(g))}}}ignored(t){let e=t.fullpath(),s=`${e}/`,n=t.relative()||".",r=`${n}/`;for(let o of this.relative)if(o.match(n)||o.match(r))return!0;for(let o of this.absolute)if(o.match(e)||o.match(s))return!0;return!1}childrenIgnored(t){let e=t.fullpath()+"/",s=(t.relative()||".")+"/";for(let n of this.relativeChildren)if(n.match(s))return!0;for(let n of this.absoluteChildren)if(n.match(e))return!0;return!1}};var Ei=class i{store;constructor(t=new Map){this.store=t}copy(){return new i(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){let s=t.fullpath(),n=this.store.get(s);n?n.add(e.globString()):this.store.set(s,new Set([e.globString()]))}},xi=class{store=new Map;add(t,e,s){let n=(e?2:0)|(s?1:0),r=this.store.get(t);this.store.set(t,r===void 0?n:n&r)}entries(){return[...this.store.entries()].map(([t,e])=>[t,!!(e&2),!!(e&1)])}},Ci=class{store=new Map;add(t,e){if(!t.canReaddir())return;let s=this.store.get(t);s?s.find(n=>n.globString()===e.globString())||s.push(e):this.store.set(t,[e])}get(t){let e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map(t=>[t,this.store.get(t)])}keys(){return[...this.store.keys()].filter(t=>t.canReaddir())}},Ae=class i{hasWalkedCache;matches=new xi;subwalks=new Ci;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new Ei}processPatterns(t,e){this.patterns=e;let s=e.map(n=>[t,n]);for(let[n,r]of s){this.hasWalkedCache.storeWalked(n,r);let o=r.root(),a=r.isAbsolute()&&this.opts.absolute!==!1;if(o){n=n.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let u=r.rest();if(u)r=u;else{this.matches.add(n,!0,!1);continue}}if(n.isENOENT())continue;let l,h,c=!1;for(;typeof(l=r.pattern())=="string"&&(h=r.rest());)n=n.resolve(l),r=h,c=!0;if(l=r.pattern(),h=r.rest(),c){if(this.hasWalkedCache.hasWalked(n,r))continue;this.hasWalkedCache.storeWalked(n,r)}if(typeof l=="string"){let u=l===".."||l===""||l===".";this.matches.add(n.resolve(l),a,u);continue}else if(l===U){(!n.isSymbolicLink()||this.follow||r.checkFollowGlobstar())&&this.subwalks.add(n,r);let u=h?.pattern(),d=h?.rest();if(!h||(u===""||u===".")&&!d)this.matches.add(n,a,u===""||u===".");else if(u===".."){let f=n.parent||n;d?this.hasWalkedCache.hasWalked(f,d)||this.subwalks.add(f,d):this.matches.add(f,a,!0)}}else l instanceof RegExp&&this.subwalks.add(n,r)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new i(this.opts,this.hasWalkedCache)}filterEntries(t,e){let s=this.subwalks.get(t),n=this.child();for(let r of e)for(let o of s){let a=o.isAbsolute(),l=o.pattern(),h=o.rest();l===U?n.testGlobstar(r,o,h,a):l instanceof RegExp?n.testRegExp(r,l,h,a):n.testString(r,l,h,a)}return n}testGlobstar(t,e,s,n){if((this.dot||!t.name.startsWith("."))&&(e.hasMore()||this.matches.add(t,n,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(s&&e.checkFollowGlobstar()?this.subwalks.add(t,s):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),s){let r=s.pattern();if(typeof r=="string"&&r!==".."&&r!==""&&r!==".")this.testString(t,r,s.rest(),n);else if(r===".."){let o=t.parent||t;this.subwalks.add(o,s)}else r instanceof RegExp&&this.testRegExp(t,r,s.rest(),n)}}testRegExp(t,e,s,n){e.test(t.name)&&(s?this.subwalks.add(t,s):this.matches.add(t,n,!1))}testString(t,e,s,n){t.isNamed(e)&&(s?this.subwalks.add(t,s):this.matches.add(t,n,!1))}};var ko=(i,t)=>typeof i=="string"?new ge([i],t):Array.isArray(i)?new ge(i,t):i,qe=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#t=[];#i;#r;signal;maxDepth;constructor(t,e,s){this.patterns=t,this.path=e,this.opts=s,this.#r=!s.posix&&s.platform==="win32"?"\\":"/",s.ignore&&(this.#i=ko(s.ignore,s)),this.maxDepth=s.maxDepth||1/0,s.signal&&(this.signal=s.signal,this.signal.addEventListener("abort",()=>{this.#t.length=0}))}#s(t){return this.seen.has(t)||!!this.#i?.ignored?.(t)}#a(t){return!!this.#i?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let t;for(;!this.paused&&(t=this.#t.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#t.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||await t.realpath(),!s)return;t=s}let r=t.isUnknown()||this.opts.stat?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&r?.isSymbolicLink()){let o=await r.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(r,e)}matchCheckTest(t,e){return t&&(this.maxDepth===1/0||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!t.isSymbolicLink()||!t.realpathCached()?.isDirectory())&&!this.#s(t)?t:void 0}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||t.realpathSync(),!s)return;t=s}let r=t.isUnknown()||this.opts.stat?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&r?.isSymbolicLink()){let o=r.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(r,e)}matchFinish(t,e){if(this.#s(t))return;let s=this.opts.absolute===void 0?e:this.opts.absolute;this.seen.add(t);let n=this.opts.mark&&t.isDirectory()?this.#r:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(s){let r=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(r+n)}else{let r=this.opts.posix?t.relativePosix():t.relative(),o=this.opts.dotRelative&&!r.startsWith(".."+this.#r)?"."+this.#r:"";this.matchEmit(r?o+r+n:"."+n)}}async match(t,e,s){let n=await this.matchCheck(t,s);n&&this.matchFinish(n,e)}matchSync(t,e,s){let n=this.matchCheckSync(t,s);n&&this.matchFinish(n,e)}walkCB(t,e,s){this.signal?.aborted&&s(),this.walkCB2(t,e,new Ae(this.opts),s)}walkCB2(t,e,s,n){if(this.#a(t))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2(t,e,s,n));return}s.processPatterns(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,l,h]of s.matches.entries())this.#s(a)||(r++,this.match(a,l,h).then(()=>o()));for(let a of s.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;r++;let l=a.readdirCached();a.calledReaddir()?this.walkCB3(a,l,s,o):a.readdirCB((h,c)=>this.walkCB3(a,c,s,o),!0)}o()}walkCB3(t,e,s,n){s=s.filterEntries(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,l,h]of s.matches.entries())this.#s(a)||(r++,this.match(a,l,h).then(()=>o()));for(let[a,l]of s.subwalks.entries())r++,this.walkCB2(a,l,s.child(),o);o()}walkCBSync(t,e,s){this.signal?.aborted&&s(),this.walkCB2Sync(t,e,new Ae(this.opts),s)}walkCB2Sync(t,e,s,n){if(this.#a(t))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2Sync(t,e,s,n));return}s.processPatterns(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,l,h]of s.matches.entries())this.#s(a)||this.matchSync(a,l,h);for(let a of s.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;r++;let l=a.readdirSync();this.walkCB3Sync(a,l,s,o)}o()}walkCB3Sync(t,e,s,n){s=s.filterEntries(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,l,h]of s.matches.entries())this.#s(a)||this.matchSync(a,l,h);for(let[a,l]of s.subwalks.entries())r++,this.walkCB2Sync(a,l,s.child(),o);o()}},be=class extends qe{matches;constructor(t,e,s){super(t,e,s),this.matches=new Set}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((t,e)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},we=class extends qe{results;constructor(t,e,s){super(t,e,s),this.results=new Tt({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){let t=this.path;return t.isUnknown()?t.lstat().then(()=>{this.walkCB(t,this.patterns,()=>this.results.end())}):this.walkCB(t,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var yo=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",at=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=(0,Js.fileURLToPath)(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof t=="string"&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(t=t.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=t,this.platform=e.platform||yo,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,e.nocase!==void 0&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=e.platform==="win32"?$t:e.platform==="darwin"?me:e.platform?Xt:Ys;this.scurry=new l(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;let s=this.platform==="darwin"||this.platform==="win32",n={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:s,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},r=this.pattern.map(l=>new V(l,n)),[o,a]=r.reduce((l,h)=>(l[0].push(...h.set),l[1].push(...h.globParts),l),[[],[]]);this.patterns=o.map((l,h)=>{let c=a[h];if(!c)throw new Error("invalid pattern object");return new Ht(l,c,0,this.platform)})}async walk(){return[...await new be(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new be(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new we(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new we(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Bi=(i,t={})=>{Array.isArray(i)||(i=[i]);for(let e of i)if(new V(e,t).hasMagic())return!0;return!1};function Ye(i,t={}){return new at(i,t).streamSync()}function en(i,t={}){return new at(i,t).stream()}function ke(i,t={}){return new at(i,t).walkSync()}async function Ks(i,t={}){return new at(i,t).walk()}function Je(i,t={}){return new at(i,t).iterateSync()}function sn(i,t={}){return new at(i,t).iterate()}var vo=Ye,So=Object.assign(en,{sync:Ye}),Eo=Je,xo=Object.assign(sn,{sync:Je}),Co=Object.assign(ke,{stream:Ye,iterate:Je}),tn=Object.assign(Ks,{glob:Ks,globSync:ke,sync:Co,globStream:en,stream:So,globStreamSync:Ye,streamSync:vo,globIterate:sn,iterate:xo,globIterateSync:Je,iterateSync:Eo,Glob:at,hasMagic:Bi,escape:xt,unescape:nt});tn.glob=tn;var J=(i,t,e)=>e.indexOf(i)===t;var nn=require("os"),ye=require("vscode");var Bo=(0,nn.homedir)(),Ti=i=>i.replace(/\${(.*?)}/g,(t,e)=>e=="vscode:workspace"&&ye.workspace.workspaceFolders&&ye.workspace.workspaceFolders.length>0&&ye.workspace.workspaceFolders[0].uri?ve(ye.workspace.workspaceFolders[0].uri.fsPath.toString()):e=="user:home"?ve(Bo):e in process.env?ve(process.env[e]||""):"");var on=i=>{let t=(0,rn.extname)(i);for(let e of Ke())if(`.${e}`===t)return!0;return!1},an={absolute:!0,nodir:!0},Ri=i=>ve(i.fsPath),ve=i=>xt(i.replace(/\\/g,"/")),Gt=i=>{let t=0,e=[];for(let s of Array.isArray(i)?i.filter(J):[i])s.startsWith("https://")?t++:e.push(Ti(s));return t+ke(e,an).filter(on).filter(J).length},Se=i=>{let t=[],e=[];for(let s of Array.isArray(i)?i.filter(J):[i])s.startsWith("https://")?t.push(s):e.push(Ti(s));return t.concat(ke(e,an).filter(on).map(s=>`vscode-file://vscode-app/${s.replace(/\\/g,"/").replace(/^\/+/g,"")}`)).filter(J).map(s=>'"'+s.replace(/"/g,'\\"')+'"')};var yt="KatsuteDev/Background",To=new RegExp(`^\\/\\* ${yt}-start \\*\\/$[\\s\\S]*?^\\/\\* ${yt}-end \\*\\/$`,"gmi"),Ke=()=>["png","jpg","jpeg","webp","gif","bmp","svg"],ln=i=>Ii(i)+`
/* ${yt}-start */
`+Io(Ro())+`
/* ${yt}-end */`,Ii=i=>i.replace(To,"").trim(),Ro=()=>{let i={window:Se(A("windowBackgrounds")),editor:Se(A("editorBackgrounds")),sidebar:Se(A("sidebarBackgrounds")),panel:Se(A("panelBackgrounds"))},t=A("renderContentAboveBackground");return`(() => {
const bk_global = document.createElement("style");
bk_global.id = "${yt}-global";
bk_global.setAttribute("type", "text/css");

bk_global.appendChild(document.createTextNode(\`

    body[windowTransition="true"]${t?" > div[role=application] > div.monaco-grid-view::after":"::before"},
    body[editorTransition="true"] .split-view-view > .editor-group-container::after,
    body[sidebarTransition="true"] .split-view-view > .part.sidebar::after,
    body[sidebarTransition="true"] .split-view-view > .part.auxiliarybar::after,
    body[panelTransition="true"] .split-view-view > .part.panel::after {

        opacity: 0;

    }

    body${t?" > div[role=application] > div.monaco-grid-view::after":"::before"},
    .split-view-view > .editor-group-container::after,
    .split-view-view > .part.sidebar::after,
    .split-view-view > .part.auxiliarybar::after,
    .split-view-view > .part.panel::after {

        content: "";

        top: 0;

        width: 100%;
        height: 100%;

        ${t?"":"z-index: 1000;"}

        position: absolute;

        pointer-events: none;

        transition: opacity 1s ease-in-out;

        image-rendering: ${A("smoothImageRendering")?"auto":"pixelated"};

    }
\`));

const windowBackgrounds = [${i.window.join(",")}];
const editorBackgrounds = [${i.editor.join(",")}];
const sidebarBackgrounds = [${i.sidebar.join(",")}];
const panelBackgrounds = [${i.panel.join(",")}];

const iWindowBackgrounds = [...Array(${i.window.length}).keys()];
const iEditorBackgrounds = [...Array(${i.editor.length}).keys()];
const iSidebarBackgrounds = [...Array(${i.sidebar.length}).keys()];
const iPanelBackgrounds = [...Array(${i.panel.length}).keys()];

const windowTime = ${A("backgroundChangeTime","window",!0)==0?0:Math.max(N(A("backgroundChangeTime","window",!0),2),5)};
const editorTime = ${A("backgroundChangeTime","editor",!0)==0?0:Math.max(N(A("backgroundChangeTime","editor",!0),2),5)};
const sidebarTime = ${A("backgroundChangeTime","sidebar",!0)==0?0:Math.max(N(A("backgroundChangeTime","sidebar",!0),2),5)};
const panelTime = ${A("backgroundChangeTime","panel",!0)==0?0:Math.max(N(A("backgroundChangeTime","panel",!0),2),5)};

if(windowBackgrounds.length > 0){
    bk_global.appendChild(document.createTextNode(\`
        body${t?" > div[role=application] > div.monaco-grid-view::after":"::before"} {

            background-position: ${C("backgroundAlignment","window")};
            background-repeat: ${C("backgroundRepeat","window")};
            background-size: ${C("backgroundSize","window")};

            opacity: ${N(1-+C("backgroundOpacity","window"),2)};

            filter: blur(${C("backgroundBlur","window")});

        }
    \`));
};

if(editorBackgrounds.length > 0){
    bk_global.appendChild(document.createTextNode(\`
        .split-view-view > .editor-group-container::after {

            background-position: ${C("backgroundAlignment","editor")};
            background-repeat: ${C("backgroundRepeat","editor")};
            background-size: ${C("backgroundSize","editor")};

            opacity: ${N(1-+C("backgroundOpacity","editor"),2)};

            filter: blur(${C("backgroundBlur","editor")});

        }
    \`));
};

if(sidebarBackgrounds.length > 0){
    bk_global.appendChild(document.createTextNode(\`
        .split-view-view > .part.sidebar::after,
        .split-view-view > .part.auxiliarybar::after {

            background-position: ${C("backgroundAlignment","sidebar")};
            background-repeat: ${C("backgroundRepeat","sidebar")};
            background-size: ${C("backgroundSize","sidebar")};

            opacity: ${N(1-+C("backgroundOpacity","sidebar"),2)};

            filter: blur(${C("backgroundBlur","sidebar")});

        }
    \`));
};

if(panelBackgrounds.length > 0){
    bk_global.appendChild(document.createTextNode(\`
        .split-view-view > .part.panel::after {

            background-position: ${C("backgroundAlignment","panel")};
            background-repeat: ${C("backgroundRepeat","panel")};
            background-size: ${C("backgroundSize","panel")};

            opacity: ${N(1-+C("backgroundOpacity","panel"),2)};

            filter: blur(${C("backgroundBlur","panel")});

        }
    \`));
};

bk_global.appendChild(document.createTextNode(\`
    div.notification-toast:has(> div.notifications-list-container > div.monaco-list[aria-label="Your Code installation appears to be corrupt. Please reinstall., notification"]),
    div.notification-toast:has(> div.notifications-list-container > div.monaco-list[aria-label="Your Code - Insiders installation appears to be corrupt. Please reinstall., notification"]) {

        display: none;

    }

    div.monaco-list-row[aria-label$=", source: Background (Extension), notification"],
    div.monaco-list-row[aria-label$=", source: Background (Extension), notification"]:hover {

        background-color: #0098FF !important;
        color: white !important;

    }

    div.monaco-list-row[aria-label$=", source: Background (Extension), notification"] ::before {

        color: white;

    }
\`));

bk_global.appendChild(document.createTextNode("${is(A("CSS"))}"));

const bk_window_image = document.createElement("style");
bk_window_image.id = "${yt}-window-images";
bk_window_image.setAttribute("type", "text/css");

const setWindowBackground = () => {
    while(bk_window_image.firstChild){
        bk_window_image.removeChild(bk_window_image.firstChild);
    };

    if(windowBackgrounds.length > 0){
        shuffle(iWindowBackgrounds);

        bk_window_image.appendChild(document.createTextNode(\`
            body${t?" > div[role=application] > div.monaco-grid-view::after":"::before"} {

                background-image: url("\${windowBackgrounds[iWindowBackgrounds[0]].replace(/"/g, \`\\\\"\`)}");

            }
        \`));
    };
};

const bk_editor_image = document.createElement("style");
bk_editor_image.id = "${yt}-editor-images";
bk_editor_image.setAttribute("type", "text/css");

const setEditorBackground = () => {
    while(bk_editor_image.firstChild){
        bk_editor_image.removeChild(bk_editor_image.firstChild);
    };

    if(editorBackgrounds.length > 0){
        const len = Math.min(editorBackgrounds.length, 10);

        shuffle(iEditorBackgrounds);

        let buf = '';
        for(let i = 0; i < len; i++){
            buf += \`
                .part.editor :not(.split-view-container) .split-view-container > .split-view-view:nth-child(\${len}n+\${i+1}) > .editor-group-container::after {
                    background-image: url("\${editorBackgrounds[iEditorBackgrounds[i]].replace(/"/g, \`\\\\"\`)}");
                }
            \`;
        };
        bk_editor_image.appendChild(document.createTextNode(buf));
    };
};

const bk_sidebar_image = document.createElement("style");
bk_sidebar_image.id = "${yt}-sidebar-images";
bk_sidebar_image.setAttribute("type", "text/css");

const setSidebarBackground = () => {
    while(bk_sidebar_image.firstChild){
        bk_sidebar_image.removeChild(bk_sidebar_image.firstChild);
    };

    if(sidebarBackgrounds.length > 0){
        shuffle(iSidebarBackgrounds);

        bk_sidebar_image.appendChild(document.createTextNode(\`
            .split-view-view > .part.sidebar::after {

                background-image: url("\${sidebarBackgrounds[iSidebarBackgrounds[0]].replace(/"/g, \`\\\\"\`)}");

            }
            .split-view-view > .part.auxiliarybar::after {

                background-image: url("\${(sidebarBackgrounds[iSidebarBackgrounds[1]] ?? sidebarBackgrounds[iSidebarBackgrounds[0]]).replace(/"/g, \`\\\\"\`)}");

            }
        \`));
    };
};

const bk_panel_image = document.createElement("style");
bk_panel_image.id = "${yt}-panel-images";
bk_panel_image.setAttribute("type", "text/css");

const setPanelBackground = () => {
    while(bk_panel_image.firstChild){
        bk_panel_image.removeChild(bk_panel_image.firstChild);
    };

    if(panelBackgrounds.length > 0){
        shuffle(iPanelBackgrounds);

        bk_panel_image.appendChild(document.createTextNode(\`
            .split-view-view > .part.panel::after {

                background-image: url("\${panelBackgrounds[iPanelBackgrounds[0]].replace(/"/g, \`\\\\"\`)}");

            }
        \`));
    };
};

const shuffle = (arr) => {
    for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * i);
        [arr[i], arr[j]] = [arr[j], arr[i]];
    };
};

document.getElementsByTagName("head")[0].appendChild(bk_global);
document.getElementsByTagName("head")[0].appendChild(bk_window_image);
document.getElementsByTagName("head")[0].appendChild(bk_editor_image);
document.getElementsByTagName("head")[0].appendChild(bk_sidebar_image);
document.getElementsByTagName("head")[0].appendChild(bk_panel_image);

for(const arr of [iWindowBackgrounds, iEditorBackgrounds, iSidebarBackgrounds, iPanelBackgrounds]){
    for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    };
};

setWindowBackground();
setEditorBackground();
setSidebarBackground();
setPanelBackground();

if(windowTime > 0 && iWindowBackgrounds.length > 1){
    setInterval(() => {
        document.body.setAttribute("windowTransition", true);
        setTimeout(() => {
            setWindowBackground();
            document.body.setAttribute("windowTransition", false);
        }, 1 * 1000);
    }, windowTime * 1000);
};
if(editorTime > 0 && iEditorBackgrounds.length > 1){
    setInterval(() => {
        document.body.setAttribute("editorTransition", true);
        setTimeout(() => {
            setEditorBackground();
            document.body.setAttribute("editorTransition", false);
        }, 1 * 1000);
    }, editorTime * 1000);
};
if(sidebarTime > 0 && iSidebarBackgrounds.length > 1){
    setInterval(() => {
        document.body.setAttribute("sidebarTransition", true);
        setTimeout(() => {
            setSidebarBackground();
            document.body.setAttribute("sidebarTransition", false);
        }, 1 * 1000);
    }, sidebarTime * 1000);
};
if(panelTime > 0 && iPanelBackgrounds.length > 1){
    setInterval(() => {
        document.body.setAttribute("panelTransition", true);
        setTimeout(() => {
            setPanelBackground();
            document.body.setAttribute("panelTransition", false);
        }, 1 * 1000);
    }, panelTime * 1000);
};
})();`},Io=i=>i.trim().replace(/\/\/ .*$/gm,"").replace(/\/\*.*?\*\//gms,"").replace(/^ +/gm,"").replace(/\r?\n/gm,"");var lt=(i,t)=>Array.isArray(i)?lt(i.length,t):`${i} ${t}${i!=1?"s":""}`,Pi=(i,t,e)=>i+(t(i)?e:""),ti=i=>`${(i[0]??"").toUpperCase()+(i??"").substring(1)}`;var ii=require("os"),pt=require("vscode");var K=st("backgroundAlignment"),vt=i=>Mt("backgroundAlignment",i,i.ui).then(()=>O(i.ui)),hn=i=>{let t=A("backgroundAlignment",i);it([k({label:K.items.enum[0],handle:vt,ui:i},t),k({label:K.items.enum[1],handle:vt,ui:i},t),k({label:K.items.enum[2],handle:vt,ui:i},t),_(),k({label:K.items.enum[3],handle:vt,ui:i},t),k({label:K.items.enum[4],handle:vt,ui:i},t),k({label:K.items.enum[5],handle:vt,ui:i},t),_(),k({label:K.items.enum[6],handle:vt,ui:i},t),k({label:K.items.enum[7],handle:vt,ui:i},t),k({label:K.items.enum[8],handle:vt,ui:i},t),_(),k({label:K.items.enum[9],description:`(${A("backgroundAlignmentValue",i)})`,ui:i,handle:e=>{let s=A("backgroundAlignmentValue",i);G({title:L("Alignment",i),placeHolder:"Background position",value:s,prompt:`Background position (${s}). The literal value for the 'background-position' css property.`,validateInput:n=>gt(n)?null:"Invalid CSS",handle:n=>{if(gt(n)){let r=A("backgroundAlignment",i)!==K.items.enum[9]||s!==n;I("backgroundAlignment",K.items.enum[9],i,!0).then(()=>I("backgroundAlignmentValue",n,i,!0)).then(()=>{r&&ie(),O(i)})}}})}},t)],{title:L("Alignment",i),matchOnDescription:!0,placeHolder:"Background alignment"})};var cn=i=>{let t=A("backgroundBlur",i);G({title:L("Blur",i),placeHolder:"Background blur",value:t,prompt:`Background blur (${t})`,validateInput:e=>gt(e)?null:"Invalid CSS",handle:e=>{gt(e)&&I("backgroundBlur",e,i).then(()=>O(i))}})};var un=require("vscode");var dn=i=>{let t=N(A("backgroundOpacity",i),2);G({title:L("Opacity",i),placeHolder:"Background opacity",value:t.toString(),prompt:`Background opacity (${t}). 0 is fully visible and 1 is invisible.`,validateInput:e=>isNaN(+e)?"Not a number":+e<0||+e>1?"Opacity must be between 0 and 1":null,handle:e=>{if(!isNaN(+e)){let s=Math.min(Math.max(N(+e,2),0),1);s>.1?I("backgroundOpacity",s,i).then(()=>O(i)):un.window.showWarningMessage("An opacity of "+s+" might make it difficult to see the UI, are you sure you want to use this opacity?",{modal:!0},"Yes").then(n=>{n==="Yes"&&I("backgroundOpacity",s,i).then(()=>O(i))})}}})};var tt=st("backgroundRepeat"),Zt=i=>Mt("backgroundRepeat",i,i.ui).then(()=>O(i.ui)),fn=i=>{let t=A("backgroundRepeat",i);it([k({label:tt.items.enum[0],description:tt.items.enumDescriptions[0],handle:Zt,ui:i},t),k({label:tt.items.enum[1],description:tt.items.enumDescriptions[1],handle:Zt,ui:i},t),k({label:tt.items.enum[2],description:tt.items.enumDescriptions[2],handle:Zt,ui:i},t),k({label:tt.items.enum[3],description:tt.items.enumDescriptions[3],handle:Zt,ui:i},t),k({label:tt.items.enum[4],description:tt.items.enumDescriptions[4],handle:Zt,ui:i},t),k({label:tt.items.enum[5],description:tt.items.enumDescriptions[5],handle:Zt,ui:i},t)],{title:L("Repeat",i),matchOnDescription:!0,placeHolder:"Background repeat"})};var St=st("backgroundSize"),Fi=i=>Mt("backgroundSize",i,i.ui).then(()=>O(i.ui)),pn=i=>{let t=A("backgroundSize",i);it([k({label:St.items.enum[0],description:St.items.enumDescriptions[0],handle:Fi,ui:i},t),k({label:St.items.enum[1],description:St.items.enumDescriptions[1],handle:Fi,ui:i},t),k({label:St.items.enum[2],description:St.items.enumDescriptions[2],handle:Fi,ui:i},t),_(),k({label:St.items.enum[3],description:`(${A("backgroundSizeValue",i)})`,ui:i,handle:e=>{let s=A("backgroundSizeValue",i);G({title:L("Size",i),placeHolder:"Background size",value:s,prompt:`Background size (${s}). The literal value for the 'background-size' css property.`,validateInput:n=>gt(n)?null:"Invalid CSS",handle:n=>{if(gt(n)){let r=A("backgroundSize",i)!==St.items.enum[3]||s!==n;I("backgroundSize",St.items.enum[3],i,!0).then(()=>I("backgroundSizeValue",n,i,!0)).then(()=>{r&&ie(),O(i)})}}})}},t)],{title:L("Size",i),matchOnDescription:!0,placeHolder:"Background size"})};var mn=i=>{let t=N(A("backgroundChangeTime",i),2);G({title:L("Change Time",i),placeHolder:"Background change time",value:t.toString(),prompt:`Background change time (${t}). How long in seconds before the background should automatically change. Set to 0 to always use the same image.`,validateInput:e=>isNaN(+e)?"Not a number":+e<0?"Background change time must be a positive number":null,handle:e=>{if(!isNaN(+e)){let s=Math.max(N(+e,2),0);I("backgroundChangeTime",s,i).then(()=>O(i))}}})};var Po=`https://github.com/KatsuteDev/Background/issues/new?template=bug.yml&os=${encodeURIComponent(`${(0,ii.platform)()} ${(0,ii.release)()}`)}&vs=${encodeURIComponent(pt.version)}&version=${encodeURIComponent(li.version)}`,Di=()=>it([ei("window","window"),ei("editor","multiple-windows"),ei("sidebar","layout-sidebar-left"),ei("panel","layout-panel"),_(),k({alwaysShow:!0,label:"$(check) Install",description:"Install background",handle:()=>pt.commands.executeCommand("background.install")}),k({alwaysShow:!0,label:"$(close) Uninstall",description:"Uninstall background",handle:()=>pt.commands.executeCommand("background.uninstall")}),k({alwaysShow:!0,label:"$(refresh) Reload",description:"Randomizes the current background",handle:()=>pt.commands.executeCommand("background.reload")}),_(),k({label:"$(output) Changelog",handle:()=>pt.commands.executeCommand("background.changelog")}),k({label:"$(question) Help",handle:()=>pt.commands.executeCommand("background.help")}),k({label:"$(github) Report an issue on GitHub",handle:()=>pt.env.openExternal(`${Po}&settings=${encodeURIComponent("```json\n"+JSON.stringify(bt(),null,4)+"\n```")}`)})],{title:"Background",matchOnDescription:!0}),ei=(i,t)=>{let e=A(`${i}Backgrounds`),s=`${lt(e,"Glob")} (${lt(Gt(e),"Background")})`,n=`${A("backgroundAlignment",i)} Alignment \u2022 ${A("backgroundBlur",i)} Blur \u2022 ${A("backgroundOpacity",i)} Opacity \u2022 ${A("backgroundRepeat",i)} Repeat \u2022 ${A("backgroundSize",i)} Size`,r=+A("backgroundChangeTime",i);return r>0&&(n+=" \u2022 "+lt(r,"second")),k({label:`$(${t}) ${ti(i)}`,description:s,detail:n,ui:i,handle:()=>O(i)})},O=i=>it([k({label:"$(file-media) File",description:`${lt(A(`${i}Backgrounds`),"Glob")} (${lt(Gt(A(`${i}Backgrounds`)),"Background")})`,detail:"Select background image files",ui:i,handle:()=>Ee(i)}),_(),k({label:"$(arrow-both) Alignment",description:`${Pi(A("backgroundAlignment",i),t=>t==="Manual",` (${A("backgroundAlignmentValue",i)})`)}`,detail:"Background image alignment",ui:i,handle:()=>hn(i)}),k({label:"$(eye) Blur",description:`${A("backgroundBlur",i)}`,detail:"Background image blur",ui:i,handle:()=>cn(i)}),k({label:"$(color-mode) Opacity",description:`${A("backgroundOpacity",i)}`,detail:"Background image opacity",ui:i,handle:()=>dn(i)}),k({label:"$(multiple-windows) Repeat",description:`${A("backgroundRepeat",i)}`,detail:"Background image repeat",ui:i,handle:()=>fn(i)}),k({label:"$(screen-full) Size",description:`${Pi(A("backgroundSize",i),t=>t==="Manual",` (${A("backgroundSizeValue",i)})`)}`,detail:"Background image size",ui:i,handle:()=>pn(i)}),k({label:"$(clock) Time",description:`${lt(+A("backgroundChangeTime",i),"second")}`,detail:"How often to change the background",ui:i,handle:()=>mn(i)})],{title:`${ti(i)} Background`,matchOnDescription:!0,matchOnDetail:!0},Di),L=(i,t)=>(t?`${ti(t)} `:"")+`Background - ${i}`;var Ut=i=>A(`${i}Backgrounds`),Yt=async(i,t,e=!1)=>{let s=Ut(i);s.push(...Array.isArray(t)?t:[t]),await I(`${i}Backgrounds`,s.filter(J),void 0,e),e||Ee(i)},Oi=async(i,t,e,s=!1)=>{let n=Ut(i).filter(J);for(let r=0,o=n.length;r<o;r++)if(n[r]===t){n[r]=e;break}await I(`${i}Backgrounds`,n.filter(J),void 0,s||t===e),s||Ee(i)},si=async(i,t,e=!1)=>{let s=Array.isArray(t)?t:[t];await I(`${i}Backgrounds`,Ut(i).filter(n=>!s.includes(n)).filter(J),void 0,e),e||Ee(i)},Ee=i=>{let t=Ut(i).filter(J).map(e=>k({label:e.replace(/(\$\(\w+\))/g,"\\$1"),value:e,ui:i,description:`${lt(Gt(e),"matching file")}`,handle:s=>G({title:`Update ${s.value}`,placeHolder:"File path, glob, or URL; leave blank to remove",value:s.value??"",prompt:"Use only '/' for directories, '\\' is reserved for escape characters. Leave this field blank to remove.",validateInput:n=>n.startsWith("file://")?"Do not include 'file://' as part of the file path":n.startsWith("http://")?"Images must be served over HTTPS":null,handle:n=>{n.trim().length===0?si(i,s.value):Oi(i,s.value,n)}})}));it([...t,_(),k({alwaysShow:!0,label:"$(file-add) Add a File",ui:i,handle:e=>qt.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!0,openLabel:"Select Image",filters:{Images:Ke()}}).then(s=>s&&Yt(i,s.map(n=>Ri(n))))}),k({alwaysShow:!0,label:"$(file-directory-create) Add a Folder",ui:i,handle:e=>qt.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!0,openLabel:"Select Folder"}).then(s=>s&&Yt(i,s.map(n=>`${Ri(n)}/**`)))}),k({alwaysShow:!0,label:"$(kebab-horizontal) Add a Glob",ui:i,handle:e=>qt.window.showInputBox({title:"Add Glob",placeHolder:"File path or glob",prompt:"Add a file or a glob. Use only '/' for directories, '\\' is reserved for escape characters.",validateInput:s=>s.startsWith("file://")?"Do not include 'file://' as part of the file path":s.startsWith("http://")||s.startsWith("https://")?"Image URLs do not support glob, use Add URL option":null}).then(s=>{s&&Yt(i,s)})}),k({alwaysShow:!0,label:"$(ports-open-browser-icon) Add a URL",ui:i,handle:e=>qt.window.showInputBox({title:"Add URL",placeHolder:"Image URL",prompt:"Add a image URL. Must be served over HTTPS",validateInput:s=>s.startsWith("file://")?"File URLs not accepted, use Add File option":s.startsWith("http://")?"Images must be served over HTTPS":s.startsWith("https://")?null:"Invalid URL"}).then(s=>{s&&Yt(i,s)})}),...t.length>0?[_(),k({alwaysShow:!0,label:"$(trash) Delete a Background",ui:i,handle:e=>{let s=Ut(i).filter(J).map(n=>{let r=Gt(n);return k({label:n.replace(/(\$\(\w+\))/g,"\\$1"),value:n,ui:e.ui,description:`${lt(r,"matching file")}`})});qt.window.showQuickPick(s,{title:L("Delete",i),placeHolder:"Files",canPickMany:!0}).then(n=>n&&si(i,n.map(r=>r.value)))}})]:[]],{title:L("Files",i),placeHolder:"Files"},()=>O(i))};var gn={install:()=>Ni.commands.executeCommand("background.install"),uninstall:()=>Ni.commands.executeCommand("background.uninstall"),reload:Dt,get:i=>{switch(i){case"window":case"editor":case"sidebar":case"panel":return Ut(i);default:return}},add:async(i,t)=>{switch(i){case"window":case"editor":case"sidebar":case"panel":return await Yt(i,t,!0),!0;default:return!1}},replace:async(i,t,e)=>{switch(i){case"window":case"editor":case"sidebar":case"panel":return await Oi(i,t,e,!0),!0;default:return!1}},remove:async(i,t)=>{switch(i){case"window":case"editor":case"sidebar":case"panel":return await si(i,t,!0),!0;default:return!1}}};var Qi=Lt(Fn()),ri=require("vscode"),xe=require("os"),Dn=Lt(ai()),ht=require("fs");var Vi=(i,t,e=!1)=>{Nn(i,t,ln((0,ht.readFileSync)(i,"utf-8")),e)},On=(i,t,e=!1)=>{Nn(i,t,Ii((0,ht.readFileSync)(i,"utf-8")),e)},Go=/(?<=^\s*"vs\/workbench\/workbench\.desktop\.main\.js\": \").*(?=\",\s*$)/gm,Nn=(i,t,e,s=!1)=>{let n=(0,ht.readFileSync)(t,"utf-8").replace(Go,ts(e));try{te(!0);let r=s;(0,ht.readFileSync)(i,"utf-8")!==e&&((0,ht.writeFileSync)(i,e,"utf-8"),r=!0),(0,ht.readFileSync)(t,"utf-8")!==n&&((0,ht.writeFileSync)(t,n,"utf-8"),r=!0),r?setTimeout(Dt,Ce):te(!1)}catch(r){(0,xe.platform)()==="linux"&&i.toString().replace(/\\/g,"/").includes("/snap/")&&t.toString().replace(/\\/g,"/").includes("/snap/")?ri.window.showErrorMessage("Background extension does not support snap installations, use deb or rpm"):ri.window.showWarningMessage("Failed to write changes, run command as administrator?",{detail:`The Background extension does not have permission to write changes, run command using administrator permissions?

${r.message}`,modal:!0},"Yes").then(a=>{if(a==="Yes"){let l=(0,Qi.fileSync)().name;(0,ht.writeFileSync)(l,e,"utf-8");let h=(0,Qi.fileSync)().name;(0,ht.writeFileSync)(h,n,"utf-8");let c=Fe([[l,i],[h,t]]);(0,Dn.exec)(c,{name:"VSCode Extension Host"},u=>{u?(ri.window.showErrorMessage("Failed to write changes",{detail:`OS: ${(0,xe.platform)()} ${(0,xe.release)()}
Using command: ${c}

${u.name}
${u.message}`.trim(),modal:!0}),te(!1)):Dt()})}else te(!1)})}};var Zo=1e3,Ce=7e3,te=i=>{console.log(i),oi.text=`$(${i===!1?"file-media":"loading~spin"}) Background`},oi=(()=>{let i=x.window.createStatusBarItem(x.StatusBarAlignment.Right);return i.command="background.config",i.name="Background",i.text="$(file-media) Background",i.tooltip="Open background configuration",i})(),qo=i=>{let t,e;if(require?.main?.filename)if(t=(0,It.join)((0,It.dirname)(require.main.filename),"vs","workbench","workbench.desktop.main.js"),e=(0,It.join)((0,It.dirname)(require.main.filename),"../","product.json"),(0,Pt.existsSync)(t))if((0,Pt.existsSync)(e)){let r=t.replace(".js","-backup.js"),o=e.replace(".json","-backup.json");if(!(0,Pt.existsSync)(r)||!(0,Pt.existsSync)(o))try{(0,Pt.copyFileSync)(t,r),(0,Pt.copyFileSync)(e,o)}catch(a){if((0,Be.platform)()==="linux"&&t.toString().replace(/\\/g,"/").includes("/snap/")&&e.toString().replace(/\\/g,"/").includes("/snap/")){x.window.showErrorMessage("Background extension does not support snap installations, use deb or rpm");return}else x.window.showWarningMessage("Failed to backup files, run command as administrator?",{detail:`The Background extension does not have permission to backup to the VSCode folder, run command using administrator permissions?

${a.message}`,modal:!0},"Yes").then(h=>{if(h==="Yes"){let c=Fe([[t,r],[e,o]]);(0,Un.exec)(c,{name:"VSCode Extension Host"},u=>{u&&x.window.showErrorMessage("Failed to backup files",{detail:`OS: ${(0,Be.platform)()} ${(0,Be.release)()}
Using command: ${c}

${u.name}
${u.message}`.trim(),modal:!0})})}else x.window.showWarningMessage("Background extension is running without backup files")})}}else{x.window.showErrorMessage(`Failed to find '${e}, please report this issue`);return}else{x.window.showErrorMessage(`Failed to find '${t}, please report this issue`);return}else{x.window.showErrorMessage("Failed to find main file, please report this issue");return}let s=x.Uri.file((0,It.join)(i.extensionPath,"CHANGELOG.md")),n=x.Uri.file((0,It.join)(i.extensionPath,"HELP.md"));i.subscriptions.push(x.commands.registerCommand("background.install",()=>Vi(t,e,!0)),x.commands.registerCommand("background.uninstall",()=>bt().update("autoInstall",!1,x.ConfigurationTarget.Global).then(()=>On(t,e,!0))),x.commands.registerCommand("background.reload",Dt),x.commands.registerCommand("background.help",()=>x.commands.executeCommand("markdown.showPreview",n)),x.commands.registerCommand("background.changelog",()=>x.commands.executeCommand("markdown.showPreview",s)),x.commands.registerCommand("background.config",Di),oi),oi.show(),bt().get("autoInstall")&&Vi(t,e,!1);for(let r=Ce;r>Zo;r-=1e3)setTimeout(()=>Ce-=1e3,r);return gn};0&&(module.exports={activate,installDelay,setActive,statusbar});
